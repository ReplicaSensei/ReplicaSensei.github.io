<!DOCTYPE html>



  


<html class="theme-next mist use-motion" lang="en">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">










<meta name="description" content="Java是世界上最好的语言！(请忽略php)">
<meta name="keywords" content="“java,程序员&quot;">
<meta property="og:type" content="website">
<meta property="og:title" content="Valley of End">
<meta property="og:url" content="http://replica.me/index.html">
<meta property="og:site_name" content="Valley of End">
<meta property="og:description" content="Java是世界上最好的语言！(请忽略php)">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Valley of End">
<meta name="twitter:description" content="Java是世界上最好的语言！(请忽略php)">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Mist',
    version: '5.1.4',
    sidebar: {"position":"left"},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: 'Author'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://replica.me/">





  <title>Valley of End</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Valley of End</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">为学日益，为道日损。损之又损，以至于无为。---「老子」</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-主页">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            主页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-归档">
          <a href="/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://replica.me/2020/08/10/网络编程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReplicaSensei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/head01.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Valley of End">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/10/网络编程/" itemprop="url">网络编程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-10T09:37:33+08:00">
                2020-08-10
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="InetAddress"><a href="#InetAddress" class="headerlink" title="InetAddress"></a>InetAddress</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestInetAddress</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 本机地址</span></span><br><span class="line">    InetAddress ia = InetAddress.getLocalHost();</span><br><span class="line">    System.out.println(<span class="string">"IP地址："</span> + ia.getHostAddress() + <span class="string">"主机名："</span> + ia.getHostName());</span><br><span class="line">    InetAddress ia2 = ia.getByName(<span class="string">"10.0.139.103"</span>);</span><br><span class="line">    System.out.println(<span class="string">"IP地址："</span> + ia2.getHostAddress() + <span class="string">"主机名："</span> + ia2.getHostName());</span><br><span class="line">    InetAddress ia3 = InetAddress.getByName(<span class="string">"localhost"</span>);</span><br><span class="line">    System.out.println(<span class="string">"IP地址："</span> + ia3.getHostAddress() + <span class="string">"主机名："</span> + ia3.getHostName());</span><br><span class="line">    InetAddress ia4 = InetAddress.getByName(<span class="string">"127.0.0.1"</span>);</span><br><span class="line">    System.out.println(<span class="string">"IP地址："</span> + ia4.getHostAddress() + <span class="string">"主机名："</span> + ia4.getHostName());</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 局域网</span></span><br><span class="line">    InetAddress ia5 = InetAddress.getByName(<span class="string">"10.0.139.49"</span>);</span><br><span class="line">    System.out.println(<span class="string">"IP地址："</span> + ia5.getHostAddress() + <span class="string">"主机名："</span> + ia5.getHostName());</span><br><span class="line">    System.out.println(<span class="string">"3s内是否可达："</span> + ia5.isReachable(<span class="number">3000</span>));</span><br><span class="line">    InetAddress ia6 = InetAddress.getByName(<span class="string">"10.0.139.165"</span>);</span><br><span class="line">    System.out.println(<span class="string">"IP地址："</span> + ia6.getHostAddress() + <span class="string">"主机名："</span> + ia6.getHostName());</span><br><span class="line">    System.out.println(<span class="string">"3s内是否可达："</span> + ia6.isReachable(<span class="number">3000</span>));</span><br><span class="line"></span><br><span class="line">    <span class="comment">//3. 外网地址</span></span><br><span class="line">    InetAddress ia7 = InetAddress.getByName(<span class="string">"www.baidu.com"</span>);</span><br><span class="line">    System.out.println(<span class="string">"IP地址："</span> + ia7.getHostAddress() + <span class="string">"主机名："</span> + ia7.getHostName());</span><br><span class="line">    System.out.println(<span class="string">"3s内是否可达："</span> + ia7.isReachable(<span class="number">3000</span>));</span><br><span class="line"></span><br><span class="line">    InetAddress[] allByName = InetAddress.getAllByName(<span class="string">"www.baidu.com"</span>);</span><br><span class="line">    <span class="keyword">for</span> (InetAddress inetAddress : allByName) &#123;</span><br><span class="line">      System.out.println(inetAddress.getHostAddress());</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="客户端发送数据到服务端"><a href="#客户端发送数据到服务端" class="headerlink" title="客户端发送数据到服务端"></a>客户端发送数据到服务端</h1><h2 id="Server端"><a href="#Server端" class="headerlink" title="Server端"></a>Server端</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TcpServer</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建ServerSocket，并指定端口号</span></span><br><span class="line">    ServerSocket listener = <span class="keyword">new</span> ServerSocket(<span class="number">8888</span>);</span><br><span class="line">    <span class="comment">//2. 侦听，返回Socket</span></span><br><span class="line">    System.out.println(<span class="string">"服务器已启动！"</span>);</span><br><span class="line">    Socket socket = listener.accept();</span><br><span class="line">    <span class="comment">//3. 获取输入输出流</span></span><br><span class="line">    BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream(), <span class="string">"utf-8"</span>));</span><br><span class="line">    BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream(), <span class="string">"utf-8"</span>));</span><br><span class="line">    <span class="comment">//4. 处理</span></span><br><span class="line">    <span class="comment">//4.1 读取</span></span><br><span class="line">    String data = bufferedReader.readLine();    <span class="comment">//遇到换行符才返回，一直等待换行符</span></span><br><span class="line">    System.out.println(<span class="string">"客户端说："</span> + data);</span><br><span class="line">    <span class="comment">//4.2 写入</span></span><br><span class="line">    bufferedWriter.write(<span class="string">"老地方见\r"</span>);</span><br><span class="line">    bufferedWriter.flush();</span><br><span class="line">    <span class="comment">//5. 关闭</span></span><br><span class="line">    bufferedReader.close();</span><br><span class="line">    bufferedWriter.close();</span><br><span class="line">    listener.close();</span><br><span class="line">    socket.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Client端"><a href="#Client端" class="headerlink" title="Client端"></a>Client端</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TcpClient</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建Socket， 并指定服务器地址和端口号</span></span><br><span class="line">    Socket socket = <span class="keyword">new</span> Socket(<span class="string">"10.0.139.103"</span>, <span class="number">8888</span>);</span><br><span class="line">    <span class="comment">//2. 获取输入输出流</span></span><br><span class="line">    BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream(), <span class="string">"utf-8"</span>));</span><br><span class="line">    BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream(), <span class="string">"utf-8"</span>));</span><br><span class="line">    <span class="comment">//3. 处理数据</span></span><br><span class="line">    <span class="comment">//3.1 写入</span></span><br><span class="line">    bufferedWriter.write(<span class="string">"好久不见。么么哒\r"</span>);</span><br><span class="line">    bufferedWriter.flush();</span><br><span class="line">    <span class="comment">//3.2 读取</span></span><br><span class="line">    String data = bufferedReader.readLine();</span><br><span class="line">    System.out.println(<span class="string">"服务端说："</span> + data);</span><br><span class="line">    <span class="comment">//4. 关闭</span></span><br><span class="line">    bufferedReader.close();</span><br><span class="line">    bufferedWriter.close();</span><br><span class="line">    socket.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="客户端发送文件到服务端"><a href="#客户端发送文件到服务端" class="headerlink" title="客户端发送文件到服务端"></a>客户端发送文件到服务端</h1><h2 id="Server端-1"><a href="#Server端-1" class="headerlink" title="Server端"></a>Server端</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileServer</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建ServerSocket，并指定端口号</span></span><br><span class="line">    ServerSocket listener = <span class="keyword">new</span> ServerSocket(<span class="number">12121</span>);</span><br><span class="line">    <span class="comment">//2. 侦听</span></span><br><span class="line">    System.out.println(<span class="string">"服务器已启动"</span>);</span><br><span class="line">    Socket socket = listener.accept();</span><br><span class="line">    <span class="comment">//3. 获取</span></span><br><span class="line">    InputStream inputStream = socket.getInputStream();</span><br><span class="line">    BufferedInputStream bufferedInputStream = <span class="keyword">new</span> BufferedInputStream(inputStream);</span><br><span class="line">    <span class="comment">//4. 处理数据</span></span><br><span class="line">    FileOutputStream fileOutputStream = <span class="keyword">new</span> FileOutputStream(<span class="string">"/Users/replicasensei/Desktop/pr2.jpg"</span>);</span><br><span class="line">    <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">2048</span>];</span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> ((len = bufferedInputStream.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      fileOutputStream.write(buf, <span class="number">0</span>, len);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//5. 关闭</span></span><br><span class="line">    fileOutputStream.close();</span><br><span class="line">    bufferedInputStream.close();</span><br><span class="line">    socket.close();</span><br><span class="line">    listener.close();</span><br><span class="line">    System.out.println(<span class="string">"接收完毕"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Client端-1"><a href="#Client端-1" class="headerlink" title="Client端"></a>Client端</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileClient</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建Socket，并指定服务器地址和端口号</span></span><br><span class="line">    Socket socket = <span class="keyword">new</span> Socket(<span class="string">"10.0.139.175"</span>, <span class="number">6666</span>);</span><br><span class="line">    <span class="comment">//2. 获取输出流</span></span><br><span class="line">    OutputStream outputStream = socket.getOutputStream();</span><br><span class="line">    BufferedOutputStream bufferedOutputStream = <span class="keyword">new</span> BufferedOutputStream(outputStream);</span><br><span class="line">    <span class="comment">//3. 处理数据</span></span><br><span class="line">    FileInputStream fileInputStream = <span class="keyword">new</span> FileInputStream(<span class="string">"/Users/replicasensei/Desktop/pr.jpg"</span>);</span><br><span class="line">    <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">2048</span>];</span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> ((len = fileInputStream.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      bufferedOutputStream.write(buf, <span class="number">0</span>, len);</span><br><span class="line">      bufferedOutputStream.flush();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//4. 关闭</span></span><br><span class="line">    fileInputStream.close();</span><br><span class="line">    bufferedOutputStream.close();</span><br><span class="line">    socket.close();</span><br><span class="line">    System.out.println(<span class="string">"发送完毕"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="聊天室"><a href="#聊天室" class="headerlink" title="聊天室"></a>聊天室</h1><h2 id="Server端-2"><a href="#Server端-2" class="headerlink" title="Server端"></a>Server端</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChatServer</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    ServerSocket listener = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//创建线程池</span></span><br><span class="line">    ExecutorService executorService = Executors.newCachedThreadPool();</span><br><span class="line">    ConcurrentHashMap&lt;String, Socket&gt; hashMap = <span class="keyword">new</span> ConcurrentHashMap&lt;&gt;();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//1. 创建一个ServerSocket</span></span><br><span class="line">      listener = <span class="keyword">new</span> ServerSocket(<span class="number">6688</span>);</span><br><span class="line">      <span class="comment">//2. 侦听</span></span><br><span class="line">      <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">        Socket socket = listener.accept();</span><br><span class="line">        <span class="comment">//保存到map中</span></span><br><span class="line">        System.out.println(socket.getInetAddress().toString());</span><br><span class="line">        hashMap.put(socket.getInetAddress().getHostAddress(), socket);</span><br><span class="line">        System.out.println(socket.getInetAddress().getHostAddress() + <span class="string">"进入了聊天室..."</span>);</span><br><span class="line">        executorService.submit(<span class="keyword">new</span> ChatSocket(socket, hashMap));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        listener.close();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChatSocket</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> Socket socket;</span><br><span class="line">  <span class="keyword">private</span> ConcurrentHashMap&lt;String, Socket&gt; hashMap;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">ChatSocket</span><span class="params">(Socket socket, ConcurrentHashMap&lt;String, Socket&gt; hashMap)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.socket = socket;</span><br><span class="line">    <span class="keyword">this</span>.hashMap = hashMap;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (socket != <span class="keyword">null</span>) &#123;</span><br><span class="line">      BufferedReader bufferedReader = <span class="keyword">null</span>;</span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="comment">//获取输入流</span></span><br><span class="line">        InputStream inputStream = socket.getInputStream();</span><br><span class="line">        bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(inputStream, <span class="string">"utf-8"</span>));</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">          String data = bufferedReader.readLine();</span><br><span class="line">          <span class="comment">//拆分</span></span><br><span class="line">          String[] infos = data.split(<span class="string">":"</span>);</span><br><span class="line">          System.out.println(infos.length);</span><br><span class="line">          <span class="keyword">if</span> (infos.length &gt; <span class="number">1</span>) &#123;</span><br><span class="line">            String ip = infos[<span class="number">0</span>];</span><br><span class="line">            System.out.println(<span class="string">"转发ip："</span> + ip);</span><br><span class="line">            <span class="keyword">if</span> (hashMap.containsKey(ip)) &#123;</span><br><span class="line">              <span class="comment">//转发</span></span><br><span class="line">              Socket toSocket = hashMap.get(ip);</span><br><span class="line">              OutputStream outputStream = toSocket.getOutputStream();</span><br><span class="line">              BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(outputStream));</span><br><span class="line">              bufferedWriter.write(socket.getInetAddress() + <span class="string">":"</span> + infos[<span class="number">1</span>]);</span><br><span class="line">              bufferedWriter.newLine();</span><br><span class="line">              bufferedWriter.close();</span><br><span class="line">            &#125;</span><br><span class="line">          &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (data == <span class="keyword">null</span>) &#123;</span><br><span class="line">              System.out.println(socket.getInetAddress().getHostAddress() + <span class="string">"退出了聊天"</span>);</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(socket.getInetAddress().getHostAddress() + <span class="string">"说："</span> + data);</span><br><span class="line">            <span class="keyword">if</span> (data.equals(<span class="string">"byebye"</span>)) &#123;</span><br><span class="line">              System.out.println(socket.getInetAddress().getHostAddress() + <span class="string">"退出了聊天"</span>);</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">        System.out.println(socket.getInetAddress().getHostAddress() + <span class="string">"异常退出了"</span>);</span><br><span class="line">      &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          bufferedReader.close();</span><br><span class="line">          socket.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Client端-2"><a href="#Client端-2" class="headerlink" title="Client端"></a>Client端</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ChatClient</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建Socket</span></span><br><span class="line">    Socket socket = <span class="keyword">new</span> Socket(<span class="string">"10.0.139.49"</span>, <span class="number">6688</span>);</span><br><span class="line">    <span class="comment">//2. 发送线程</span></span><br><span class="line">    <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          OutputStream outputStream = socket.getOutputStream();</span><br><span class="line">          BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(outputStream, <span class="string">"utf-8"</span>));</span><br><span class="line">          <span class="comment">//3. 处理数据</span></span><br><span class="line">          <span class="comment">//3.1 创建Scanner</span></span><br><span class="line">          Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">          <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            String data = input.next();</span><br><span class="line">            bufferedWriter.write(data);</span><br><span class="line">            bufferedWriter.newLine();</span><br><span class="line">            bufferedWriter.flush();</span><br><span class="line">            <span class="keyword">if</span> (data.equals(<span class="string">"byebye"</span>)) &#123;</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="comment">//4. 关闭</span></span><br><span class="line">          bufferedWriter.close();</span><br><span class="line">          socket.close();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).start();</span><br><span class="line">    <span class="comment">//3. 读取线程</span></span><br><span class="line">    <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          InputStream inputStream = socket.getInputStream();</span><br><span class="line">          BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(inputStream, <span class="string">"utf-8"</span>));</span><br><span class="line">          <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">            String data = bufferedReader.readLine();</span><br><span class="line">            <span class="keyword">if</span> (data == <span class="keyword">null</span>) &#123;</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            System.out.println(data);</span><br><span class="line">          &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            socket.close();</span><br><span class="line">          &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="登录注册"><a href="#登录注册" class="headerlink" title="登录注册"></a>登录注册</h1><h2 id="User"><a href="#User" class="headerlink" title="User"></a>User</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> Integer id;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">transient</span> String pwd;</span><br><span class="line">  <span class="keyword">private</span> Integer age;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">double</span> score;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">(Integer id, String name, String pwd, Integer age, <span class="keyword">double</span> score)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.id = id;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.pwd = pwd;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">    <span class="keyword">this</span>.score = score;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">User</span><span class="params">()</span> </span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Integer <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(Integer id)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.id = id;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getPwd</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.pwd;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPwd</span><span class="params">(String pwd)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.pwd = pwd;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> Integer <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(Integer age)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">double</span> <span class="title">getScore</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.score;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setScore</span><span class="params">(<span class="keyword">double</span> score)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.score = score;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> id + <span class="string">"=&#123;"</span> +</span><br><span class="line">      <span class="string">"id:"</span> + id +</span><br><span class="line">      <span class="string">", name:'"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">      <span class="string">", pwd:'"</span> + pwd + <span class="string">'\''</span> +</span><br><span class="line">      <span class="string">", age:"</span> + age +</span><br><span class="line">      <span class="string">", score:"</span> + score +</span><br><span class="line">      <span class="string">'&#125;'</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Client端-3"><a href="#Client端-3" class="headerlink" title="Client端"></a>Client端</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Client</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    System.out.println(<span class="string">"----------------------1. 注册   2. 登录-------------------"</span>);</span><br><span class="line">    System.out.println(<span class="string">"请选择"</span>);</span><br><span class="line">    Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    <span class="keyword">int</span> choice = scanner.nextInt();</span><br><span class="line">    <span class="keyword">switch</span> (choice) &#123;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">1</span>:</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          regist();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">case</span> <span class="number">2</span>:</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          login();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      <span class="keyword">default</span>:</span><br><span class="line">        System.out.println(<span class="string">"输入有误"</span>);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">regist</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    User user = getInfo();</span><br><span class="line">    <span class="comment">//1. 创建Socket</span></span><br><span class="line">    Socket socket = <span class="keyword">new</span> Socket(<span class="string">"10.0.139.103"</span>, <span class="number">6666</span>);</span><br><span class="line">    <span class="comment">//2. 获取输入输出流</span></span><br><span class="line">    BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">    BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream()));</span><br><span class="line">    <span class="comment">//3. 处理数据</span></span><br><span class="line">    <span class="comment">//3.1 写入</span></span><br><span class="line">    bufferedWriter.write(user.toString());</span><br><span class="line">    bufferedWriter.newLine();</span><br><span class="line">    bufferedWriter.flush();</span><br><span class="line">    <span class="comment">//        ObjectOutputStream objectOutputStream = new ObjectOutputStream(socket.getOutputStream());</span></span><br><span class="line">    <span class="comment">//        objectOutputStream.writeObject(user);</span></span><br><span class="line">    <span class="comment">//        objectOutputStream.flush();</span></span><br><span class="line">    <span class="comment">//3.2 读取</span></span><br><span class="line">    String data = bufferedReader.readLine();</span><br><span class="line">    System.out.println(<span class="string">"服务器回复:"</span> + data);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//1001 = &#123;id : 1001, name : tom, pwd : 123, age : 20, score : 98.5&#125;</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> User <span class="title">getInfo</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    System.out.println(<span class="string">"请输入用户id"</span>);</span><br><span class="line">    Integer id = input.nextInt();</span><br><span class="line">    System.out.println(<span class="string">"请输入姓名"</span>);</span><br><span class="line">    String name = input.next();</span><br><span class="line">    System.out.println(<span class="string">"请输入密码"</span>);</span><br><span class="line">    String pwd = input.next();</span><br><span class="line">    System.out.println(<span class="string">"请输入年龄"</span>);</span><br><span class="line">    Integer age = input.nextInt();</span><br><span class="line">    System.out.println(<span class="string">"请输入成绩"</span>);</span><br><span class="line">    <span class="keyword">double</span> score = input.nextDouble();</span><br><span class="line">    User user = <span class="keyword">new</span> User(id, name, pwd, age, score);</span><br><span class="line">    <span class="keyword">return</span> user;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">login</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    Scanner scanner = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    System.out.println(<span class="string">"请输入id"</span>);</span><br><span class="line">    String id = scanner.next();</span><br><span class="line">    System.out.println(<span class="string">"请输入密码"</span>);</span><br><span class="line">    String pwd = scanner.next();</span><br><span class="line">    <span class="comment">//1. 创建Socket</span></span><br><span class="line">    Socket socket = <span class="keyword">new</span> Socket(<span class="string">"10.0.139.103"</span>, <span class="number">8888</span>);</span><br><span class="line">    <span class="comment">//2. 获取输入输出流</span></span><br><span class="line">    BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">    BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream()));</span><br><span class="line">    <span class="comment">//3. 处理数据</span></span><br><span class="line">    bufferedWriter.write(id + <span class="string">":"</span> + pwd);</span><br><span class="line">    bufferedWriter.newLine();</span><br><span class="line">    bufferedWriter.flush();</span><br><span class="line">    <span class="comment">//4.2 读取</span></span><br><span class="line">    String data = bufferedReader.readLine();</span><br><span class="line">    System.out.println(<span class="string">"服务器回复:"</span> + data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="RegisterServer"><a href="#RegisterServer" class="headerlink" title="RegisterServer"></a>RegisterServer</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RegisterServer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//注册功能</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//1. 创建ServerSocket，并指定端口号</span></span><br><span class="line">      ServerSocket listener = <span class="keyword">new</span> ServerSocket(<span class="number">6666</span>);</span><br><span class="line">      System.out.println(<span class="string">"注册服务已启动...."</span>);</span><br><span class="line">      <span class="comment">//2. 侦听</span></span><br><span class="line">      Socket socket = listener.accept();</span><br><span class="line">      <span class="comment">//3. 获取输入输出流</span></span><br><span class="line">      BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">      BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream()));</span><br><span class="line">      <span class="comment">//4. 处理数据</span></span><br><span class="line">      String data = bufferedReader.readLine();</span><br><span class="line">      <span class="comment">//1001 = &#123;id : 1001, name : tom, pwd : 123, age : 20, score : 98.5&#125;</span></span><br><span class="line">      <span class="comment">//4.1 获取id</span></span><br><span class="line">      String[] arr = data.split(<span class="string">"="</span>);</span><br><span class="line">      String id = arr[<span class="number">0</span>];</span><br><span class="line">      File file = <span class="keyword">new</span> File(<span class="string">"users.properties"</span>);</span><br><span class="line">      <span class="comment">//判读文件是否存在</span></span><br><span class="line">      Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">      <span class="keyword">if</span> (file.exists()) &#123;</span><br><span class="line">        <span class="comment">//4.2 读取Properties</span></span><br><span class="line">        FileInputStream fileInputStream = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">        properties.load(fileInputStream);</span><br><span class="line">        fileInputStream.close();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="comment">//4.3 判断id是否已经存在</span></span><br><span class="line">      <span class="keyword">if</span> (properties.containsKey(id)) &#123;</span><br><span class="line">        bufferedWriter.write(id + <span class="string">"已经存在，请重新注册"</span>);</span><br><span class="line">        bufferedWriter.newLine();</span><br><span class="line">        bufferedWriter.flush();</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//注册成功</span></span><br><span class="line">        properties.setProperty(id, arr[<span class="number">1</span>]);</span><br><span class="line">        <span class="comment">//保存文件</span></span><br><span class="line">        FileOutputStream fileOutputStream = <span class="keyword">new</span> FileOutputStream(file);</span><br><span class="line">        properties.store(fileOutputStream, <span class="string">"用户信息"</span>);</span><br><span class="line">        fileOutputStream.close();</span><br><span class="line">        bufferedWriter.write(<span class="string">"注册成功"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      bufferedWriter.newLine();</span><br><span class="line">      bufferedWriter.flush();</span><br><span class="line">      <span class="comment">//5. 关闭资源</span></span><br><span class="line">      bufferedReader.close();</span><br><span class="line">      bufferedWriter.close();</span><br><span class="line">      socket.close();</span><br><span class="line">      listener.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="LoginServer"><a href="#LoginServer" class="headerlink" title="LoginServer"></a>LoginServer</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">LoginServer</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="comment">//登录功能</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="comment">//1. 创建ServerSocket，并指定端口号</span></span><br><span class="line">      ServerSocket listener = <span class="keyword">new</span> ServerSocket(<span class="number">8888</span>);</span><br><span class="line">      System.out.println(<span class="string">"登录服务已启动..."</span>);</span><br><span class="line">      <span class="comment">//2. 侦听</span></span><br><span class="line">      Socket socket = listener.accept();</span><br><span class="line">      <span class="comment">//3. 获取输入输出流</span></span><br><span class="line">      BufferedReader bufferedReader = <span class="keyword">new</span> BufferedReader(<span class="keyword">new</span> InputStreamReader(socket.getInputStream()));</span><br><span class="line">      BufferedWriter bufferedWriter = <span class="keyword">new</span> BufferedWriter(<span class="keyword">new</span> OutputStreamWriter(socket.getOutputStream()));</span><br><span class="line">      <span class="comment">//4. 处理数据</span></span><br><span class="line">      <span class="comment">//4.1 获取id和pwd</span></span><br><span class="line">      String data = bufferedReader.readLine();</span><br><span class="line">      String[] split = data.split(<span class="string">":"</span>);</span><br><span class="line">      String id = split[<span class="number">0</span>];</span><br><span class="line">      String pwd = split[<span class="number">1</span>];</span><br><span class="line">      System.out.println(id + <span class="string">":"</span> + pwd);</span><br><span class="line">      <span class="comment">//4.2 读取文件</span></span><br><span class="line">      Properties properties = <span class="keyword">new</span> Properties();</span><br><span class="line">      File file = <span class="keyword">new</span> File(<span class="string">"users.properties"</span>);</span><br><span class="line">      <span class="keyword">if</span> (file.exists()) &#123;</span><br><span class="line">        <span class="comment">//4.2 读取Properties</span></span><br><span class="line">        FileInputStream fileInputStream = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">        properties.load(fileInputStream);</span><br><span class="line">        fileInputStream.close();</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">if</span> (properties.containsKey(id)) &#123;</span><br><span class="line">        <span class="comment">//再判断密码</span></span><br><span class="line">        String property = properties.getProperty(id);</span><br><span class="line">        String pwd2 = property.split(<span class="string">","</span>)[<span class="number">2</span>].split(<span class="string">":"</span>)[<span class="number">1</span>];</span><br><span class="line">        pwd2 = pwd2.substring(<span class="number">1</span>, pwd2.length() - <span class="number">1</span>);</span><br><span class="line">        <span class="keyword">if</span> (pwd.equals(pwd2)) &#123;</span><br><span class="line">          bufferedWriter.write(<span class="string">"登录成功"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">          bufferedWriter.write(<span class="string">"密码错误"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        bufferedWriter.write(<span class="string">"登录失败，请重新输入登录信息"</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      bufferedWriter.newLine();</span><br><span class="line">      bufferedWriter.flush();</span><br><span class="line">      <span class="comment">//5. 关闭资源</span></span><br><span class="line">      bufferedReader.close();</span><br><span class="line">      bufferedWriter.close();</span><br><span class="line">      socket.close();</span><br><span class="line">      listener.close();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Server端-3"><a href="#Server端-3" class="headerlink" title="Server端"></a>Server端</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Server</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">new</span> Thread(<span class="keyword">new</span> RegisterServer()).start();</span><br><span class="line">    <span class="keyword">new</span> Thread(<span class="keyword">new</span> LoginServer()).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://replica.me/2020/08/06/IO操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReplicaSensei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/head01.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Valley of End">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/06/IO操作/" itemprop="url">I/O操作</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-06T16:47:07+08:00">
                2020-08-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="File类"><a href="#File类" class="headerlink" title="File类"></a>File类</h1><h2 id="文件基本操作"><a href="#文件基本操作" class="headerlink" title="文件基本操作"></a>文件基本操作</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileOperate</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException, InterruptedException </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建文件</span></span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">"/Users/replicasensei/Desktop/aaa.txt"</span>);</span><br><span class="line">    <span class="keyword">if</span> (!file.exists()) &#123;</span><br><span class="line">      <span class="keyword">boolean</span> b = file.createNewFile();</span><br><span class="line">      System.out.println(<span class="string">"创建结果："</span> + b);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      System.out.println(<span class="string">"文件已存在"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2. 删除文件</span></span><br><span class="line">    <span class="comment">//2.1 直接删除</span></span><br><span class="line">    <span class="comment">//        boolean b2 = file.delete();</span></span><br><span class="line">    <span class="comment">//        System.out.println("删除结果：" + b2);</span></span><br><span class="line">    <span class="comment">//2.2 JVM删除</span></span><br><span class="line">    <span class="comment">//        Thread.sleep(5000);</span></span><br><span class="line">    <span class="comment">//        file.deleteOnExit();</span></span><br><span class="line">    <span class="comment">//3. 获取信息</span></span><br><span class="line">    System.out.println(<span class="string">"文件长度："</span> + file.length());</span><br><span class="line">    System.out.println(<span class="string">"文件名称："</span> + file.getName());</span><br><span class="line">    System.out.println(<span class="string">"文件绝对路径："</span> + file.getAbsolutePath());</span><br><span class="line">    System.out.println(<span class="string">"文件路径："</span> + file.getPath());</span><br><span class="line">    System.out.println(<span class="string">"文件父目录："</span> + file.getParent());</span><br><span class="line">    System.out.println(<span class="string">"文件最后一次修改时间："</span> + <span class="keyword">new</span> Date(file.lastModified()));</span><br><span class="line">    <span class="comment">//4. 判断</span></span><br><span class="line">    System.out.println(<span class="string">"是否存在："</span> + file.exists());</span><br><span class="line">    System.out.println(<span class="string">"是否可写："</span> + file.canWrite());</span><br><span class="line">    System.out.println(<span class="string">"是否隐藏："</span> + file.isHidden());</span><br><span class="line">    System.out.println(<span class="string">"是不是文件："</span> + file.isFile());</span><br><span class="line">    <span class="comment">//5. 修改名称(具有剪切功能)</span></span><br><span class="line">    Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">    File file2 = <span class="keyword">new</span> File(<span class="string">"/Users/replicasensei/Desktop/bbb.txt"</span>);</span><br><span class="line">    file.renameTo(file2);</span><br><span class="line">    Thread.sleep(<span class="number">2000</span>);</span><br><span class="line">    <span class="keyword">boolean</span> b3 = file2.delete();</span><br><span class="line">    System.out.println(b3);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="目录基本操作"><a href="#目录基本操作" class="headerlink" title="目录基本操作"></a>目录基本操作</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DirectoryOperate</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建目录</span></span><br><span class="line">    File dir = <span class="keyword">new</span> File(<span class="string">"/Users/replicasensei/Desktop/aaa/bbb/ccc"</span>);</span><br><span class="line">    <span class="keyword">if</span> (!dir.exists()) &#123;</span><br><span class="line">      <span class="keyword">boolean</span> b = dir.mkdirs();</span><br><span class="line">      System.out.println(<span class="string">"创建结果："</span> + b);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      System.out.println(<span class="string">"目录已存在"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2. 删除目录</span></span><br><span class="line">    <span class="comment">//2.1 直接删除:只删除最里层空目录</span></span><br><span class="line">    <span class="comment">//        boolean b2 = dir.delete();</span></span><br><span class="line">    <span class="comment">//        System.out.println("删除结果：" + b2);</span></span><br><span class="line">    <span class="comment">//2.2 JVM删除</span></span><br><span class="line">    <span class="comment">//        dir.deleteOnExit();</span></span><br><span class="line">    <span class="comment">//3. 获取信息</span></span><br><span class="line">    System.out.println(<span class="string">"获取路径："</span> + dir.getPath());</span><br><span class="line">    System.out.println(<span class="string">"获取绝对路径："</span> + dir.getAbsolutePath());</span><br><span class="line">    System.out.println(<span class="string">"获取名称："</span> + dir.getName());</span><br><span class="line">    System.out.println(<span class="string">"获取规范名称："</span> + dir.getCanonicalPath());</span><br><span class="line">    <span class="comment">//4. 判断</span></span><br><span class="line">    System.out.println(<span class="string">"判断是否存在："</span> + dir.exists());</span><br><span class="line">    System.out.println(<span class="string">"判断是否隐藏："</span> + dir.isHidden());</span><br><span class="line">    System.out.println(<span class="string">"是不是文件夹："</span> + dir.isDirectory());</span><br><span class="line">    <span class="comment">//5. 修改目录名</span></span><br><span class="line">    File dir2 = <span class="keyword">new</span> File(<span class="string">"/Users/replicasensei/Desktop/aaa/bbb/hello"</span>);</span><br><span class="line">    dir.renameTo(dir2);</span><br><span class="line">    <span class="comment">//6. 获取目录的子目录和文件\</span></span><br><span class="line">    System.out.println(<span class="string">"------/Users/replicasensei/Desktop/mywork-----"</span>);</span><br><span class="line">    File dir3 = <span class="keyword">new</span> File(<span class="string">"/Users/replicasensei/Desktop/mywork"</span>);</span><br><span class="line">    <span class="comment">//        File[] files = dir3.listFiles();</span></span><br><span class="line">    <span class="comment">//        for (File file : files) &#123;</span></span><br><span class="line">    <span class="comment">//            System.out.println(file);</span></span><br><span class="line">    <span class="comment">//        &#125;</span></span><br><span class="line">    <span class="comment">//获取目录下的.png</span></span><br><span class="line">    File[] files = dir3.listFiles(<span class="keyword">new</span> FilenameFilter() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">accept</span><span class="params">(File dir, String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (name.endsWith(<span class="string">".png"</span>)) &#123;</span><br><span class="line">          <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="keyword">for</span> (File file : files) &#123;</span><br><span class="line">      System.out.println(file);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//获取根目录</span></span><br><span class="line">    File[] files1 = File.listRoots();</span><br><span class="line">    <span class="keyword">for</span> (File file : files1) &#123;</span><br><span class="line">      System.out.println(file);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="流"><a href="#流" class="headerlink" title="流"></a>流</h1><h2 id="输入流"><a href="#输入流" class="headerlink" title="输入流"></a>输入流</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFileInputStream</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建文件字节输入流</span></span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">"/Users/replicasensei/Desktop/aaa.txt"</span>);</span><br><span class="line">    FileInputStream fis = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">    <span class="comment">//2. 读文件</span></span><br><span class="line">    <span class="comment">//2.1 单个字节读取</span></span><br><span class="line">    <span class="comment">//        int data = fis.read();</span></span><br><span class="line">    <span class="comment">//        System.out.println(data);</span></span><br><span class="line">    <span class="comment">//2.2 读取多个字节</span></span><br><span class="line">    <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">100</span>];</span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> ((len = fis.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      System.out.println(<span class="string">"长度："</span> + len);</span><br><span class="line">      System.out.println(<span class="keyword">new</span> String(buf, <span class="number">0</span>, len));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3. 关闭流</span></span><br><span class="line">    fis.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="输出流"><a href="#输出流" class="headerlink" title="输出流"></a>输出流</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFileOutputStream</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建流</span></span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">"/Users/replicasensei/Desktop/aaa.txt"</span>);</span><br><span class="line">    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(file, <span class="keyword">false</span>);    <span class="comment">//append:true 指针指到结尾 追加文本  false 替代文本</span></span><br><span class="line">    <span class="comment">//2. 写入</span></span><br><span class="line">    String word = <span class="string">"我爱java，java是世界上最好的语言\r"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">      fos.write(word.getBytes()); <span class="comment">//写入硬盘</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3. 关闭</span></span><br><span class="line">    fos.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="缓冲流"><a href="#缓冲流" class="headerlink" title="缓冲流"></a>缓冲流</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBufferedInputStream</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建缓冲字节输入流</span></span><br><span class="line">    FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"/Users/replicasensei/Desktop/aaa.txt"</span>);</span><br><span class="line">    BufferedInputStream bufferedInputStream = <span class="keyword">new</span> BufferedInputStream(fis);</span><br><span class="line">    <span class="comment">//2. 读取</span></span><br><span class="line">    <span class="comment">//2.1 单个字节读取</span></span><br><span class="line">    <span class="comment">//        int data = 0;</span></span><br><span class="line">    <span class="comment">//        while ((data = bufferedInputStream.read()) != -1) &#123;</span></span><br><span class="line">    <span class="comment">//            System.out.println((char) data);</span></span><br><span class="line">    <span class="comment">//        &#125;</span></span><br><span class="line">    <span class="comment">//2.2 读取多个字节</span></span><br><span class="line">    <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> ((len = bufferedInputStream.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      System.out.println(<span class="keyword">new</span> String(buf, <span class="number">0</span>, len));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3. 关闭，关闭缓冲流会自动关闭节点流</span></span><br><span class="line">    bufferedInputStream.close();<span class="comment">//file.close();</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBufferedOutputStream</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建流</span></span><br><span class="line">    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"/Users/replicasensei/Desktop/aaa.txt"</span>);</span><br><span class="line">    BufferedOutputStream bufferedOutputStream = <span class="keyword">new</span> BufferedOutputStream(fos);</span><br><span class="line">    <span class="comment">//2. 写入</span></span><br><span class="line">    String word = <span class="string">"我爱上海，我爱北京，我爱Java\r"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">      bufferedOutputStream.write(word.getBytes());    <span class="comment">//并没有直接写入硬盘，写入了缓冲区</span></span><br><span class="line">      <span class="comment">//bufferedOutputStream.flush();</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3. 关闭：默认刷新，并关闭节点流</span></span><br><span class="line">    <span class="comment">//fos.close();</span></span><br><span class="line">    bufferedOutputStream.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="文件复制"><a href="#文件复制" class="headerlink" title="文件复制"></a>文件复制</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CopyFile</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建缓冲字节输入、输出流</span></span><br><span class="line">    BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(<span class="keyword">new</span> FileInputStream(<span class="string">"/Users/replicasensei/Desktop/作息表.png"</span>));</span><br><span class="line">    BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(<span class="keyword">new</span> FileOutputStream(<span class="string">"/Users/replicasensei/Desktop/copy.jpeg"</span>));</span><br><span class="line">    <span class="comment">//2. 边读边写</span></span><br><span class="line">    <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> ((len = bis.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      bos.write(buf, <span class="number">0</span>, len);</span><br><span class="line">      bos.flush();    <span class="comment">//刷新</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//关闭</span></span><br><span class="line">    bis.close();</span><br><span class="line">    bos.close();</span><br><span class="line">    System.out.println(<span class="string">"复制完毕"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="序列化"><a href="#序列化" class="headerlink" title="序列化"></a>序列化</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="keyword">implements</span> <span class="title">Serializable</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">long</span> serialVersionUID = <span class="number">1000L</span>;</span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">transient</span> <span class="keyword">int</span> age;</span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> String country = <span class="string">"中国"</span>;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"Person&#123;"</span> +</span><br><span class="line">      <span class="string">"name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">      <span class="string">", age="</span> + age +</span><br><span class="line">      <span class="string">", country='"</span> + country + <span class="string">'\''</span> +</span><br><span class="line">      <span class="string">'&#125;'</span>;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">this</span>.age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> String <span class="title">getCountry</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> Person.country;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">setCountry</span><span class="params">(String country)</span> </span>&#123;</span><br><span class="line">    Person.country = country;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SerializableDemo</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    writeObject();</span><br><span class="line">    readObject();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">writeObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建ObjectOutputStream</span></span><br><span class="line">    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"/Users/replicasensei/Desktop/person.bin"</span>);</span><br><span class="line">    ObjectOutputStream oos = <span class="keyword">new</span> ObjectOutputStream(fos);</span><br><span class="line">    <span class="comment">//2. 创建对象</span></span><br><span class="line">    Person aa = <span class="keyword">new</span> Person(<span class="string">"aa"</span>, <span class="number">20</span>);</span><br><span class="line">    Person bb = <span class="keyword">new</span> Person(<span class="string">"bb"</span>, <span class="number">20</span>);</span><br><span class="line">    Person.setCountry(<span class="string">"China"</span>);</span><br><span class="line">    ArrayList&lt;Person&gt; arrayList = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">    arrayList.add(aa);</span><br><span class="line">    arrayList.add(bb);</span><br><span class="line">    <span class="comment">//3. 序列化</span></span><br><span class="line">    oos.writeObject(arrayList);</span><br><span class="line">    <span class="comment">//关闭</span></span><br><span class="line">    oos.close();</span><br><span class="line">    System.out.println(<span class="string">"序列化成功"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">readObject</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建对象输入流</span></span><br><span class="line">    FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"/Users/replicasensei/Desktop/person.bin"</span>);</span><br><span class="line">    ObjectInputStream ois = <span class="keyword">new</span> ObjectInputStream(fis);</span><br><span class="line">    <span class="comment">//2. 反序列化</span></span><br><span class="line">    ArrayList&lt;Person&gt; arrayList = (ArrayList) ois.readObject();</span><br><span class="line">    <span class="keyword">for</span> (Person person : arrayList) &#123;</span><br><span class="line">      System.out.println(person.toString());</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3. 关闭</span></span><br><span class="line">    ois.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="字符过滤流"><a href="#字符过滤流" class="headerlink" title="字符过滤流"></a>字符过滤流</h1><h2 id="FileReader"><a href="#FileReader" class="headerlink" title="FileReader"></a>FileReader</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFileReader</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建字符文件输入流</span></span><br><span class="line">    FileReader fr = <span class="keyword">new</span> FileReader(<span class="string">"/Users/replicasensei/Desktop/aaa.txt"</span>);</span><br><span class="line">    <span class="comment">//2. 读取</span></span><br><span class="line">    <span class="comment">//2.1 单个字符</span></span><br><span class="line">    <span class="comment">//        int data = 0;</span></span><br><span class="line">    <span class="comment">//        while ((data = fr.read()) != -1) &#123;</span></span><br><span class="line">    <span class="comment">//            System.out.println((char)data);</span></span><br><span class="line">    <span class="comment">//        &#125;</span></span><br><span class="line">    <span class="comment">//2.2 读取多个字符</span></span><br><span class="line">    <span class="keyword">char</span>[] buf = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> ((len = fr.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      System.out.println(<span class="keyword">new</span> String(buf, <span class="number">0</span>, len));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3. 关闭</span></span><br><span class="line">    fr.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="FileWriter"><a href="#FileWriter" class="headerlink" title="FileWriter"></a>FileWriter</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFileWrite</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建字符文件输出流</span></span><br><span class="line">    FileWriter fw = <span class="keyword">new</span> FileWriter(<span class="string">"/Users/replicasensei/Desktop/aaa.txt"</span>);</span><br><span class="line">    <span class="comment">//2. 写入</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">      fw.write(<span class="string">"我爱java,java真香\r"</span>);</span><br><span class="line">      fw.flush();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3. 关闭</span></span><br><span class="line">    fw.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="字符过滤流-1"><a href="#字符过滤流-1" class="headerlink" title="字符过滤流"></a>字符过滤流</h1><h2 id="BufferedOutput"><a href="#BufferedOutput" class="headerlink" title="BufferedOutput"></a>BufferedOutput</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBufferedOutputStream</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建流</span></span><br><span class="line">    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"/Users/replicasensei/Desktop/aaa.txt"</span>);</span><br><span class="line">    BufferedOutputStream bufferedOutputStream = <span class="keyword">new</span> BufferedOutputStream(fos);</span><br><span class="line">    <span class="comment">//2. 写入</span></span><br><span class="line">    String word = <span class="string">"我爱上海，我爱北京，我爱Java\r"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">      bufferedOutputStream.write(word.getBytes());    <span class="comment">//并没有直接写入硬盘，写入了缓冲区</span></span><br><span class="line">      <span class="comment">//bufferedOutputStream.flush();</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3. 关闭：默认刷新，并关闭节点流</span></span><br><span class="line">    <span class="comment">//fos.close();</span></span><br><span class="line">    bufferedOutputStream.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="BufferedInput"><a href="#BufferedInput" class="headerlink" title="BufferedInput"></a>BufferedInput</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBufferedInputStream</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建缓冲字节输入流</span></span><br><span class="line">    FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"/Users/replicasensei/Desktop/aaa.txt"</span>);</span><br><span class="line">    BufferedInputStream bufferedInputStream = <span class="keyword">new</span> BufferedInputStream(fis);</span><br><span class="line">    <span class="comment">//2. 读取</span></span><br><span class="line">    <span class="comment">//2.1 单个字节读取</span></span><br><span class="line">    <span class="comment">//        int data = 0;</span></span><br><span class="line">    <span class="comment">//        while ((data = bufferedInputStream.read()) != -1) &#123;</span></span><br><span class="line">    <span class="comment">//            System.out.println((char) data);</span></span><br><span class="line">    <span class="comment">//        &#125;</span></span><br><span class="line">    <span class="comment">//2.2 读取多个字节</span></span><br><span class="line">    <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span>];</span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> ((len = bufferedInputStream.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      System.out.println(<span class="keyword">new</span> String(buf, <span class="number">0</span>, len));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3. 关闭，关闭缓冲流会自动关闭节点流</span></span><br><span class="line">    bufferedInputStream.close();<span class="comment">//file.close();</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="字符节点流"><a href="#字符节点流" class="headerlink" title="字符节点流"></a>字符节点流</h1><h2 id="FileOutput"><a href="#FileOutput" class="headerlink" title="FileOutput"></a>FileOutput</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFileOutputStream</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建流</span></span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">"/Users/replicasensei/Desktop/aaa.txt"</span>);</span><br><span class="line">    FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(file, <span class="keyword">false</span>);    <span class="comment">//append:true 指针指到结尾 追加文本  false 替代文本</span></span><br><span class="line">    <span class="comment">//2. 写入</span></span><br><span class="line">    String word = <span class="string">"我爱java，java是世界上最好的语言\r"</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">      fos.write(word.getBytes()); <span class="comment">//写入硬盘</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3. 关闭</span></span><br><span class="line">    fos.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="FileInput"><a href="#FileInput" class="headerlink" title="FileInput"></a>FileInput</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFileInputStream</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建文件字节输入流</span></span><br><span class="line">    File file = <span class="keyword">new</span> File(<span class="string">"/Users/replicasensei/Desktop/aaa.txt"</span>);</span><br><span class="line">    FileInputStream fis = <span class="keyword">new</span> FileInputStream(file);</span><br><span class="line">    <span class="comment">//2. 读文件</span></span><br><span class="line">    <span class="comment">//2.1 单个字节读取</span></span><br><span class="line">    <span class="comment">//        int data = fis.read();</span></span><br><span class="line">    <span class="comment">//        System.out.println(data);</span></span><br><span class="line">    <span class="comment">//2.2 读取多个字节</span></span><br><span class="line">    <span class="keyword">byte</span>[] buf = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">100</span>];</span><br><span class="line">    <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">while</span> ((len = fis.read(buf)) != -<span class="number">1</span>) &#123;</span><br><span class="line">      System.out.println(<span class="string">"长度："</span> + len);</span><br><span class="line">      System.out.println(<span class="keyword">new</span> String(buf, <span class="number">0</span>, len));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3. 关闭流</span></span><br><span class="line">    fis.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="随机读写文件"><a href="#随机读写文件" class="headerlink" title="随机读写文件"></a>随机读写文件</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestRandomAccessFile</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">TestRandomAccessFile</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    write();</span><br><span class="line">    read();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">write</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建随机读写文件类。 r  read  w  write</span></span><br><span class="line">    RandomAccessFile raf = <span class="keyword">new</span> RandomAccessFile(<span class="string">"/Users/replicasensei/Desktop/aaa.txt"</span>, <span class="string">"rw"</span>);</span><br><span class="line">    <span class="comment">//2. 写</span></span><br><span class="line">    raf.writeUTF(<span class="string">"aa"</span>);</span><br><span class="line">    raf.writeInt(<span class="number">20</span>);</span><br><span class="line">    raf.writeBoolean(<span class="keyword">false</span>);</span><br><span class="line">    raf.writeDouble(<span class="number">800</span>);</span><br><span class="line">    <span class="comment">//3. 关闭</span></span><br><span class="line">    raf.close();</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">read</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建随机读写文件类。 r  read  w  write</span></span><br><span class="line">    RandomAccessFile raf = <span class="keyword">new</span> RandomAccessFile(<span class="string">"/Users/replicasensei/Desktop/aaa.txt"</span>, <span class="string">"r"</span>);</span><br><span class="line">    <span class="comment">//2. 读</span></span><br><span class="line">    String name = raf.readUTF();</span><br><span class="line">    System.out.println(name);</span><br><span class="line">    <span class="keyword">int</span> age = raf.readInt();</span><br><span class="line">    System.out.println(age);</span><br><span class="line">    <span class="keyword">boolean</span> b = raf.readBoolean();</span><br><span class="line">    System.out.println(b);</span><br><span class="line">    <span class="keyword">double</span> price = raf.readDouble();</span><br><span class="line">    System.out.println(price);</span><br><span class="line">    <span class="comment">//3. 关闭</span></span><br><span class="line">    raf.close();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://replica.me/2020/08/05/高级多线程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReplicaSensei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/head01.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Valley of End">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/05/高级多线程/" itemprop="url">高级多线程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-05T15:05:52+08:00">
                2020-08-05
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="高级多线程"><a href="#高级多线程" class="headerlink" title="高级多线程"></a>高级多线程</h1><h2 id="线程池原理"><a href="#线程池原理" class="headerlink" title="线程池原理"></a>线程池原理</h2><ul>
<li><strong>将任务提交给线程池，由线程池分配线程、运行任务，并在当前任务结束后复用线程。</strong></li>
</ul>
<h2 id="获取线程池"><a href="#获取线程池" class="headerlink" title="获取线程池"></a>获取线程池</h2><ul>
<li><strong>常用的线程池接口和类(所在包java.util.concurrent):</strong><ul>
<li><strong>Executor:线程池的顶级接口。</strong></li>
<li><strong>ExecutorService:线程池接口，可通过submit(Runnable task) 提交任务代码。</strong></li>
<li><strong>Executors工厂类:通过此类可以获得一个线程池。</strong></li>
<li><strong>通过 newFixedThreadPool(int nThreads) 获取固定数量的线程池。参数:指定线 程池中线程的数量。</strong></li>
<li><strong>通过newCachedThreadPool() 获得动态数量的线程池，如不够则创建新的，无上限。</strong></li>
</ul>
</li>
</ul>
<h1 id="Java四种线程池"><a href="#Java四种线程池" class="headerlink" title="Java四种线程池"></a>Java四种线程池</h1><h2 id="1-newFixedThreadPool-创建固定大小线程池"><a href="#1-newFixedThreadPool-创建固定大小线程池" class="headerlink" title="1. newFixedThreadPool()创建固定大小线程池"></a>1. newFixedThreadPool()创建固定大小线程池</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThreadPool</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> tickets = <span class="number">100</span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1. newFixedThreadPool()固定大小线程池</span></span><br><span class="line">    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (tickets &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">int</span> count = <span class="number">101</span> - tickets;</span><br><span class="line">          System.out.println(Thread.currentThread().getName() + <span class="string">" == 卖了第"</span> + count + <span class="string">"张票"</span>);</span><br><span class="line">          tickets--;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 创建线程池</span></span><br><span class="line">    ExecutorService es = Executors.newFixedThreadPool(<span class="number">4</span>);</span><br><span class="line">    <span class="comment">//3. 提交任务给线程池</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">      es.submit(runnable);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//4. 关闭线程池</span></span><br><span class="line">    <span class="comment">//shutdownNow();尝试关闭当前正在执行的线程，没有执行的任务将不再执行</span></span><br><span class="line">    es.shutdown();  <span class="comment">//关闭等待所有的任务执行完毕后，才关闭</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="2-newCacheThreadPool-创建动态大小线程池"><a href="#2-newCacheThreadPool-创建动态大小线程池" class="headerlink" title="2. newCacheThreadPool()创建动态大小线程池"></a>2. newCacheThreadPool()创建动态大小线程池</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThreadPool</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> tickets = <span class="number">100</span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1. newCacheThreadPool()动态线程池</span></span><br><span class="line">    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (tickets &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">int</span> count = <span class="number">101</span> - tickets;</span><br><span class="line">          System.out.println(Thread.currentThread().getName() + <span class="string">" == 卖了第"</span> + count + <span class="string">"张票"</span>);</span><br><span class="line">          tickets--;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 创建线程池</span></span><br><span class="line">    ExecutorService es = Executors.newCachedThreadPool();</span><br><span class="line">    <span class="comment">//3. 提交任务给线程池</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">      es.submit(runnable);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//4. 关闭线程池</span></span><br><span class="line">    <span class="comment">//shutdownNow();尝试关闭当前正在执行的线程，没有执行的任务将不再执行</span></span><br><span class="line">    es.shutdown();  <span class="comment">//关闭等待所有的任务执行完毕后，才关闭</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="3-newSingleThreadExecutor-创建单线程池"><a href="#3-newSingleThreadExecutor-创建单线程池" class="headerlink" title="3. newSingleThreadExecutor()创建单线程池"></a>3. newSingleThreadExecutor()创建单线程池</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThreadPool</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> tickets = <span class="number">100</span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1. newSingleThreadExecutor()单线程池</span></span><br><span class="line">    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">          <span class="keyword">if</span> (tickets &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">            <span class="keyword">break</span>;</span><br><span class="line">          &#125;</span><br><span class="line">          <span class="keyword">int</span> count = <span class="number">101</span> - tickets;</span><br><span class="line">          System.out.println(Thread.currentThread().getName() + <span class="string">" == 卖了第"</span> + count + <span class="string">"张票"</span>);</span><br><span class="line">          tickets--;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//2. 创建线程池</span></span><br><span class="line">    ExecutorService es = Executors.newSingleThreadExecutor();</span><br><span class="line">    <span class="comment">//3. 提交任务给线程池</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">4</span>; i++) &#123;</span><br><span class="line">      es.submit(runnable);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//4. 关闭线程池</span></span><br><span class="line">    <span class="comment">//shutdownNow();尝试关闭当前正在执行的线程，没有执行的任务将不再执行</span></span><br><span class="line">    es.shutdown();  <span class="comment">//关闭等待所有的任务执行完毕后，才关闭</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="4-newScheduledThreadPool-创建调度线程池"><a href="#4-newScheduledThreadPool-创建调度线程池" class="headerlink" title="4. newScheduledThreadPool()创建调度线程池"></a>4. newScheduledThreadPool()创建调度线程池</h2><ul>
<li>延时执行</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThreadPool2</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建线程池</span></span><br><span class="line">    ScheduledExecutorService scheduledExecutorService = Executors.newScheduledThreadPool(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//延迟10秒后</span></span><br><span class="line">    <span class="comment">//2. 创建任务</span></span><br><span class="line">    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">"执行了............."</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//3. 提交任务线程池</span></span><br><span class="line">    scheduledExecutorService.schedule(runnable, <span class="number">10</span>, TimeUnit.SECONDS);</span><br><span class="line">    <span class="comment">//4. 关闭</span></span><br><span class="line">    scheduledExecutorService.shutdown();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li><p>周期执行</p>
<ul>
<li><p>固定频率</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThreadPool2</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建线程池</span></span><br><span class="line">    ScheduledExecutorService scheduledExecutorService = Executors.newScheduledThreadPool(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//2. 创建任务</span></span><br><span class="line">    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">"执行了......."</span> + sdf.format(<span class="keyword">new</span> Date()));</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//3. 提交任务线程池</span></span><br><span class="line">    <span class="comment">//3.1 周期执行，一秒一次固定频率， 不能关闭线程池</span></span><br><span class="line">    scheduledExecutorService.scheduleAtFixedRate(runnable, <span class="number">0</span>, <span class="number">1</span>, TimeUnit.SECONDS);</span><br><span class="line">    <span class="comment">//4. 关闭</span></span><br><span class="line">    <span class="comment">//scheduledExecutorService.shutdown();</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ul>
</li>
</ul>
<ul>
<li><p>固定延迟</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThreadPool2</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建线程池</span></span><br><span class="line">    ScheduledExecutorService scheduledExecutorService = Executors.newScheduledThreadPool(<span class="number">1</span>);</span><br><span class="line">    <span class="comment">//2. 创建任务</span></span><br><span class="line">    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy-MM-dd HH:mm:ss"</span>);</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">"执行了............."</span> + sdf.format(<span class="keyword">new</span> Date()) + <span class="string">" "</span> + count);</span><br><span class="line">        count++;</span><br><span class="line">        <span class="keyword">if</span> (count == <span class="number">10</span>) &#123;</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (count == <span class="number">20</span>) &#123;</span><br><span class="line">					scheduledExecutorService.shutdown();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//3. 提交任务线程池</span></span><br><span class="line">    <span class="comment">//3.1 周期执行，一秒一次固定频率， 不能关闭线程池</span></span><br><span class="line">    <span class="comment">//scheduledExecutorService.scheduleAtFixedRate(runnable, 0, 1, TimeUnit.SECONDS);</span></span><br><span class="line">    <span class="comment">//3.2 周期执行，固定延迟</span></span><br><span class="line">    scheduledExecutorService.scheduleWithFixedDelay(runnable, <span class="number">0</span>, <span class="number">1</span>, TimeUnit.SECONDS);</span><br><span class="line">    <span class="comment">//4. 关闭</span></span><br><span class="line">    <span class="comment">//scheduledExecutorService.shutdown();</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</li>
</ul>
<h1 id="阿里巴巴线程池编码规范"><a href="#阿里巴巴线程池编码规范" class="headerlink" title="阿里巴巴线程池编码规范"></a>阿里巴巴线程池编码规范</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestThreadPool3</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建线程池</span></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">        7个参数</span></span><br><span class="line"><span class="comment">        (1) 核心线程数</span></span><br><span class="line"><span class="comment">        (2) 最大线程数</span></span><br><span class="line"><span class="comment">        (3) 线程存活时间</span></span><br><span class="line"><span class="comment">        (4) 时间单位</span></span><br><span class="line"><span class="comment">        (5) 请求队列</span></span><br><span class="line"><span class="comment">        (6) 线程创建工厂</span></span><br><span class="line"><span class="comment">        (7) 拒绝策略</span></span><br><span class="line"><span class="comment">            7.1 AbortPolicy 抛弃任务，并抛出异常 默认拒绝策略</span></span><br><span class="line"><span class="comment">            7.2 DiscardPolicy 放弃任务，不会抛出异常</span></span><br><span class="line"><span class="comment">            7.3 DiscardOldestPolicy 放弃老的任务，添加拒绝的任务</span></span><br><span class="line"><span class="comment">            7.4 CallerRunsPolicy 线程池的创建线程执行，主线程执行</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    ThreadPoolExecutor threadPoolExecutor = <span class="keyword">new</span> ThreadPoolExecutor(<span class="number">2</span>, <span class="number">3</span>, <span class="number">1</span>, TimeUnit.SECONDS, <span class="keyword">new</span> LinkedBlockingQueue&lt;&gt;(<span class="number">1</span>), Executors.defaultThreadFactory(), <span class="keyword">new</span> ThreadPoolExecutor.CallerRunsPolicy());</span><br><span class="line">    <span class="comment">//2. 添加任务</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">int</span> num = i;</span><br><span class="line">      threadPoolExecutor.submit(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          System.out.println(Thread.currentThread().getName() + <span class="string">"开始执行了-----"</span> + num);</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">          System.out.println(Thread.currentThread().getName() + <span class="string">"执行完毕了-----"</span> + num);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//3. 关闭线程池</span></span><br><span class="line">    threadPoolExecutor.shutdown();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Future接口"><a href="#Future接口" class="headerlink" title="Future接口"></a>Future接口</h1><ul>
<li><p><strong>概念:异步接收</strong>ExecutorService.submit()<strong>所返回的状态结果，当中包含了</strong> call()<strong>的返回值。</strong></p>
</li>
<li><p><strong>方法:</strong>V get()<strong>以阻塞形式等待</strong>Future<strong>中的异步处理结果(</strong>call()<strong>的返回值)。</strong></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestCallable</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建线程池</span></span><br><span class="line">    ExecutorService es = Executors.newSingleThreadExecutor();</span><br><span class="line">    <span class="comment">//2. 创建Callable对象</span></span><br><span class="line">    Callable&lt;Integer&gt; callable = <span class="keyword">new</span> Callable&lt;Integer&gt;() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">"开始计算"</span>);</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">1</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">          sum += i;</span><br><span class="line">          Thread.sleep(<span class="number">50</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="comment">//3. 交给线程池</span></span><br><span class="line">    <span class="comment">//FutureTask 表示将要执行的任务</span></span><br><span class="line">    Future&lt;Integer&gt; future = es.submit(callable);</span><br><span class="line">    <span class="comment">//4. 关闭线程</span></span><br><span class="line">    es.shutdown();</span><br><span class="line">    <span class="comment">//5. 获取线程执行结果</span></span><br><span class="line">    System.out.println(<span class="string">"结果是:"</span> + future.get());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="两个future计算1-100的和"><a href="#两个future计算1-100的和" class="headerlink" title="两个future计算1-100的和"></a>两个future计算1-100的和</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestFuture</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> ExecutionException, InterruptedException </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建线程池</span></span><br><span class="line">    ExecutorService es = Executors.newSingleThreadExecutor();</span><br><span class="line">    <span class="comment">//2. 提交任务</span></span><br><span class="line">    Future&lt;Integer&gt; future1 = es.submit(<span class="keyword">new</span> Callable&lt;Integer&gt;() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//1-50的和</span></span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">"开始计算1-50的和"</span>);</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt;= <span class="number">50</span>; i++) &#123;</span><br><span class="line">          sum += i;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">"计算完毕"</span>);</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    Future&lt;Integer&gt; future2 = es.submit(<span class="keyword">new</span> Callable&lt;Integer&gt;() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> Integer <span class="title">call</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="comment">//51-100的和</span></span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">"开始计算1-50的和"</span>);</span><br><span class="line">        <span class="keyword">int</span> sum = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">51</span>; i &lt;= <span class="number">100</span>; i++) &#123;</span><br><span class="line">          sum += i;</span><br><span class="line">        &#125;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">"计算完毕"</span>);</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;);</span><br><span class="line">    <span class="comment">//3. 获取结果</span></span><br><span class="line">    <span class="keyword">int</span> sum = future1.get() + future2.get();</span><br><span class="line">    System.out.println(<span class="string">"1-100的和是:"</span> + sum);</span><br><span class="line">    <span class="comment">//4. 结束线程</span></span><br><span class="line">    es.shutdown();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Condition"><a href="#Condition" class="headerlink" title="Condition"></a>Condition</h1><ul>
<li>Condition接口也提供了类似Object的监视器方法，与Lock配合可以实现等待/通知模式。</li>
<li>Condition可以通俗的理解为条件队列。当一个线程在调用了await方法以后，直到线程等待的某个条件为真的时候才会被唤醒。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BankCard</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">double</span> money;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> flag;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> Lock lock = <span class="keyword">new</span> ReentrantLock();</span><br><span class="line">  <span class="keyword">private</span> Condition addCondition = lock.newCondition();</span><br><span class="line">  <span class="keyword">private</span> Condition subCondition = lock.newCondition();</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(<span class="keyword">double</span> money)</span></span>&#123;</span><br><span class="line">    lock.lock();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">while</span> (flag) &#123; <span class="comment">//如果有钱，等待</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          addCondition.await();    <span class="comment">//进入锁的等待队列等待，释放了cpu、锁</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.money += money;</span><br><span class="line">      System.out.println(Thread.currentThread().getName() + <span class="string">"存了"</span> + money + <span class="string">", 余额是:"</span> + <span class="keyword">this</span>.money);</span><br><span class="line">      flag = <span class="keyword">true</span>;</span><br><span class="line">      <span class="comment">//唤醒</span></span><br><span class="line">      subCondition.signal();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">      lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">take</span><span class="params">(<span class="keyword">double</span> money)</span> </span>&#123;</span><br><span class="line">    lock.lock();</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      <span class="keyword">while</span> (!flag) &#123; <span class="comment">//如果没钱，等待</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          subCondition.await();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">          e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">this</span>.money -= money;</span><br><span class="line">      System.out.println(Thread.currentThread().getName() + <span class="string">"取了"</span> + money + <span class="string">", 余额是:"</span> + <span class="keyword">this</span>.money);</span><br><span class="line">      flag = <span class="keyword">false</span>;</span><br><span class="line">      <span class="comment">//唤醒</span></span><br><span class="line">      addCondition.signal();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">      lock.unlock();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="CopyOnWriteArrayList"><a href="#CopyOnWriteArrayList" class="headerlink" title="CopyOnWriteArrayList"></a>CopyOnWriteArrayList</h1><ul>
<li><strong>线程安全的ArrayList，加强版读写分离。</strong></li>
<li><strong>写有锁，读无锁，读写之间不阻塞，优于读写锁。</strong></li>
<li><strong>写入时，先copy一个容器副本、再添加新元素，最后替换引用。</strong> </li>
<li><strong>使用方式与ArrayList无异。</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestCopyOnWriteArrayList</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    List&lt;String&gt; list = <span class="keyword">new</span> CopyOnWriteArrayList&lt;String&gt;();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="CopyOnWriteArraySet"><a href="#CopyOnWriteArraySet" class="headerlink" title="CopyOnWriteArraySet"></a>CopyOnWriteArraySet</h1><ul>
<li><strong>线程安全的Set，底层使用CopyOnWriteArrayList实现。</strong></li>
<li><strong>唯一不同在于，使用addIfAbsent()添加元素，会遍历数组。</strong></li>
<li><strong>如存在元素，则不添加(扔掉副本)。</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestCopyOnWriteArraySet</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Set&lt;String&gt; set = <span class="keyword">new</span> CopyOnWriteArraySet&lt;String&gt;();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="CAS算法（是乐观锁）"><a href="#CAS算法（是乐观锁）" class="headerlink" title="CAS算法（是乐观锁）"></a>CAS算法（是乐观锁）</h1><p><a href="https://www.jianshu.com/p/21be831e851e" target="_blank" rel="noopener">简书深入解析</a></p>
<ul>
<li><p>乐观锁：乐观锁（Optimistic Lock），顾名思义，就是很乐观，每次去拿数据的时候都认为别人不会修改，所以不会上锁，但是在提交更新的时候会判断一下在此期间别人有没有去更新这个数据。乐观锁适用于读多写少的应用场景，这样可以提高吞吐量。</p>
<p>乐观锁：假设不会发生并发冲突，只在提交操作时检查是否违反数据完整性。</p>
<p>乐观锁一般来说有以下2种方式：</p>
<ol>
<li>使用数据版本（Version）记录机制实现，这是乐观锁最常用的一种实现方式。何谓数据版本？即为数据增加一个版本标识，一般是通过为数据库表增加一个数字类型的 “version” 字段来实现。当读取数据时，将version字段的值一同读出，数据每更新一次，对此version值加一。当我们提交更新的时候，判断数据库表对应记录的当前版本信息与第一次取出来的version值进行比对，如果数据库表当前版本号与第一次取出来的version值相等，则予以更新，否则认为是过期数据。</li>
<li>使用时间戳（timestamp）。乐观锁定的第二种实现方式和第一种差不多，同样是在需要乐观锁控制的table中增加一个字段，名称无所谓，字段类型使用时间戳（timestamp）, 和上面的version类似，也是在更新提交的时候检查当前数据库中数据的时间戳和自己更新前取到的时间戳进行对比，如果一致则OK，否则就是版本冲突。</li>
</ol>
</li>
<li><p>悲观锁：悲观锁（Pessimistic Lock），顾名思义，就是很悲观，每次去拿数据的时候都认为别人会修改，所以每次在拿数据的时候都会上锁，这样别人想拿这个数据就会block直到它拿到锁。</p>
<p>悲观锁：假定会发生并发冲突，屏蔽一切可能违反数据完整性的操作。</p>
<p>Java synchronized 就属于悲观锁的一种实现，每次线程要修改数据时都先获得锁，保证同一时刻只有一个线程能操作数据，其他线程则会被block。</p>
</li>
</ul>
<h1 id="多线程三个特性"><a href="#多线程三个特性" class="headerlink" title="多线程三个特性"></a>多线程三个特性</h1><ul>
<li><p>原子性：即一个操作或者多个操作要么全部执行并且执行的过程不会被任何因素打断，要么就都不执行。</p>
</li>
<li><p>可见性是指当多个线程访问同一个变量时，一个线程修改了这个变量的值，其他线程能够立即看得到修改的值。</p>
</li>
<li><p>有序性：即程序执行的顺序按照代码的先后顺序执行。</p>
</li>
<li><p>synchronized可保证原子性和可见性。但不能保证有序性。</p>
</li>
<li><p>volatile可保证可见性和禁止指令重排。但不能保证原子性。</p>
<ul>
<li>Lock接口间接接住了volatile关键字的可见性和有序性。</li>
</ul>
</li>
</ul>
<h1 id="原子变量Atomic"><a href="#原子变量Atomic" class="headerlink" title="原子变量Atomic"></a>原子变量Atomic</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestAtomic</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    AtomicInteger integer2 = <span class="keyword">new</span> AtomicInteger(<span class="number">0</span>);</span><br><span class="line">    AtomicStampedReference&lt;Integer&gt; integer = <span class="keyword">new</span> AtomicStampedReference&lt;&gt;(<span class="number">0</span>, <span class="number">0</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">new</span> Thread(<span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          <span class="keyword">for</span> (; ;) &#123;</span><br><span class="line">            <span class="keyword">int</span> expect = integer.getReference();</span><br><span class="line">            <span class="keyword">int</span> stamp = integer.getStamp();</span><br><span class="line">            <span class="comment">//cas算法（底层cpu指令）</span></span><br><span class="line">            <span class="keyword">boolean</span> b = integer.compareAndSet(expect, <span class="keyword">new</span> Random().nextInt(<span class="number">100</span>), stamp, ++stamp);</span><br><span class="line">            <span class="keyword">if</span> (b) &#123;</span><br><span class="line">              System.out.println(<span class="string">"修改成功"</span> + Thread.currentThread().getName());</span><br><span class="line">              <span class="keyword">break</span>;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">              System.out.println(<span class="string">"修改失败"</span> + Thread.currentThread().getName());</span><br><span class="line">            &#125;</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;).start();</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://replica.me/2020/08/04/一键脚本搭建V2Ray/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReplicaSensei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/head01.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Valley of End">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/04/一键脚本搭建V2Ray/" itemprop="url">搭建V2Ray</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-04T17:51:19+08:00">
                2020-08-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一键脚本搭建V2Ray"><a href="#一键脚本搭建V2Ray" class="headerlink" title="一键脚本搭建V2Ray"></a>一键脚本搭建V2Ray</h1><ul>
<li><p>粘贴下面的命令（复制下面的命令，然后在 Xshell 待输入内容处“鼠标右键”/“粘贴”即可）：</p>
<p><code>bash &lt;(curl -s -L https://git.io/v2ray.sh)</code></p>
</li>
<li><p>如果提示 curl: command not found ，那是因为你的 VPS 没装 Curl ubuntu/debian 系统安装 Curl 方法: <code>apt-get update -y &amp;&amp; apt-get install curl -y</code> centos 系统安装 Curl 方法: <code>yum update -y &amp;&amp; yum install curl -y</code> 安装好 curl 之后就能安装脚本了</p>
</li>
<li><p>然后选择安装，即是输入 1 回车</p>
</li>
<li><p>选择传输协议，如果没有特别的需求，使用默认的 TCP 传输协议即可，直接回车</p>
</li>
<li><p>选择端口，如果没有特别的需求，使用默认的端口即可，直接回车</p>
</li>
<li><p>是否屏蔽广告，除非你真的需要，一般来说，直接回车即可</p>
</li>
<li><p>是否配置 Shadowsocks ，如果不需要就直接回车，否则就输入 Y 回车</p>
</li>
<li><p>Shadowsocks 端口，密码，加密方式这些东西自己看情况配置即可，我个人当然是全部直接回车</p>
</li>
<li><p>OK，按回车继续</p>
</li>
<li><p>安装信息，如果确保没有什么问题了，按回车继续</p>
</li>
</ul>
<h1 id="优化-V2Ray"><a href="#优化-V2Ray" class="headerlink" title="优化 V2Ray"></a>优化 V2Ray</h1><ul>
<li><p>由于本人的脚本在 Debian9 系统会自动开启 BBR 优化加速了，所以不需要再安装 BBR 优化了，如果你是使用其他商家的 VPS 并且是按照此教程流程来安装 V2Ray 的话，那么你可以输入</p>
<p><code>v2ray bbr</code></p>
</li>
<li><p>回车，然后选择安装 BBR 或者 锐速 来优化 V2Ray</p>
</li>
<li><p>只是还想再啰嗦一下，如果你是使用国际大厂的 VPS，并且是按照此教程流程来安装 V2Ray 的话，请自行在安全组 (防火墙) 开放端口和 UDP 协议 (如果你要使用含有 mKCP 的传输协议)</p>
</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://replica.me/2020/08/04/多线程/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReplicaSensei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/head01.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Valley of End">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/04/多线程/" itemprop="url">多线程</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-04T10:47:26+08:00">
                2020-08-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="多线程基础"><a href="#多线程基础" class="headerlink" title="多线程基础"></a>多线程基础</h1><h2 id="什么是线程"><a href="#什么是线程" class="headerlink" title="什么是线程?"></a>什么是线程?</h2><ul>
<li>线程，又称轻量级进程(Light Weight Process)。 程序中的一个顺序控制流程，同时也是CPU的基本调度单位。 进程由多个线程组成，彼此间完成不同的工作，交替执行，称为多线程。</li>
</ul>
<h2 id="进程和线程的区别"><a href="#进程和线程的区别" class="headerlink" title="进程和线程的区别:"></a>进程和线程的区别:</h2><ul>
<li>进程是操作系统资源分配的基本单位，而线程是CPU的基本调度单位。</li>
<li>一个程序运行后至少有一个进程。</li>
<li>一个进程可以包含多个线程，但是至少需要有一个线程。</li>
<li>进程间不能共享数据段地址，但同进程的线程之间可以。</li>
</ul>
<h2 id="线程的组成"><a href="#线程的组成" class="headerlink" title="线程的组成:"></a>线程的组成:</h2><ul>
<li><p>任何一个线程都具有基本的组成部分:</p>
<ul>
<li><p>CPU时间片:操作系统(OS)会为每个线程分配执行时间。</p>
</li>
<li><p>运行数据:</p>
<ul>
<li>堆空间:储存线程需要使用的对象，多个线程可以共享堆中的对象。</li>
<li>栈空间:储存线程需要使用的局部变量，每个线程都有独立的栈。</li>
</ul>
</li>
<li><p>线程的逻辑代码。</p>
</li>
</ul>
</li>
</ul>
<h2 id="线程的执行特点"><a href="#线程的执行特点" class="headerlink" title="线程的执行特点:"></a>线程的执行特点:</h2><ul>
<li><p>线程抢占式执行。</p>
<ul>
<li>效率高。</li>
<li>可防止单一线程长时间独占CPU。</li>
</ul>
</li>
<li><p>在单核CPU中，宏观上同时执行，微观上顺序执行。</p>
</li>
</ul>
<h1 id="创建线程"><a href="#创建线程" class="headerlink" title="创建线程"></a>创建线程</h1><h2 id="创建线程的第一种方式"><a href="#创建线程的第一种方式" class="headerlink" title="创建线程的第一种方式:"></a>创建线程的第一种方式:</h2><ul>
<li>继承Thread类，重写run方法。</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">      System.out.println(<span class="string">"多线程:"</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMyThread</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建线程对象</span></span><br><span class="line">    MyThread thread1 = <span class="keyword">new</span> MyThread();</span><br><span class="line">    <span class="comment">//2. 启动线程，使用start方法</span></span><br><span class="line">    thread1.start();</span><br><span class="line">    <span class="comment">//3. 主线程任务</span></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">      System.out.println(<span class="string">"主线程-----------"</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="获取和修改线程ID和名称"><a href="#获取和修改线程ID和名称" class="headerlink" title="获取和修改线程ID和名称:"></a>获取和修改线程ID和名称:</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyThread2</span> <span class="keyword">extends</span> <span class="title">Thread</span> </span>&#123;</span><br><span class="line">  <span class="comment">//修改线程名称第二种方式:setName()方法</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">MyThread2</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">		<span class="keyword">super</span>(name);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">      <span class="comment">//获取线程Id和线程名称</span></span><br><span class="line">      <span class="comment">//第一种方式:使用线程类的getId()和getName()获取</span></span><br><span class="line">      System.out.println(<span class="string">"线程ID:"</span> + <span class="keyword">this</span>.getId() + <span class="string">" 线程名称:"</span> + <span class="keyword">this</span>.getName() + <span class="string">"====="</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMyThread2</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    MyThread2 t1 = <span class="keyword">new</span> MyThread2(<span class="string">"子线程1"</span>);</span><br><span class="line">    MyThread2 t2 = <span class="keyword">new</span> MyThread2(<span class="string">"子线程2"</span>);</span><br><span class="line">    <span class="comment">//修改线程名称第一种方式:setName()方法</span></span><br><span class="line">    <span class="comment">//t1.setName("子线程1");</span></span><br><span class="line">    <span class="comment">//t2.setName("子线程2");</span></span><br><span class="line"></span><br><span class="line">    t1.start();</span><br><span class="line">    t2.start();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">      <span class="comment">//第二种方式:使用Thread.currentThread().getId() Thread.currentThread().getName()，更灵活。</span></span><br><span class="line">      System.out.println(<span class="string">"主线程ID:"</span> + Thread.currentThread().getId() + <span class="string">" 主线程名称:"</span> + Thread.currentThread().getName() + <span class="string">"========"</span> + i);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="创建线程的第二种方式"><a href="#创建线程的第二种方式" class="headerlink" title="创建线程的第二种方式:"></a>创建线程的第二种方式:</h2><ul>
<li>创建Runable接口</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyRunnable</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">            System.out.println(<span class="string">"主线程名称:"</span> + Thread.currentThread().getName() + <span class="string">"=========="</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestMyRunnable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1. 创建可运行对象</span></span><br><span class="line">        MyRunnable myRunnable = <span class="keyword">new</span> MyRunnable();</span><br><span class="line">        <span class="comment">//2. 创建线程对象</span></span><br><span class="line">        Thread thread1 = <span class="keyword">new</span> Thread(myRunnable, <span class="string">"子线程1"</span>);</span><br><span class="line">        Thread thread2 = <span class="keyword">new</span> Thread(myRunnable, <span class="string">"子线程2"</span>);</span><br><span class="line">        <span class="comment">//3. 启动线程</span></span><br><span class="line">        thread1.start();</span><br><span class="line">        thread2.start();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="休眠"><a href="#休眠" class="headerlink" title="休眠"></a>休眠</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestSleep</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">          System.out.println(Thread.currentThread().getName() + <span class="string">"..."</span> + i);</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//如果想让程序运行快点，可以适当调整休眠的时间</span></span><br><span class="line">            <span class="comment">//休眠之后，不会争抢CPU，休眠时间到了，进入就绪状态，参与CPU的争抢</span></span><br><span class="line">            Thread.sleep(<span class="number">1000</span>);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">new</span> Thread(runnable, <span class="string">"线程1"</span>).start();</span><br><span class="line">    <span class="keyword">new</span> Thread(runnable, <span class="string">"线程2"</span>).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="放弃"><a href="#放弃" class="headerlink" title="放弃"></a>放弃</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestYield</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//创建可运行对象</span></span><br><span class="line">    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">          System.out.println(Thread.currentThread().getName() + <span class="string">"..."</span> + i);</span><br><span class="line">          <span class="comment">//放弃、谦让，把CPU的使用权让给别的线程(优先级和让出线程相同或高于让出线程)，但是继续参与CPU的争抢</span></span><br><span class="line">          Thread.yield();</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">new</span> Thread(runnable, <span class="string">"线程1"</span>).start();</span><br><span class="line">    <span class="keyword">new</span> Thread(runnable, <span class="string">"线程2"</span>).start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="加入"><a href="#加入" class="headerlink" title="加入"></a>加入</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestJoin</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    <span class="comment">//创建可运行对象</span></span><br><span class="line">    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">          System.out.println(Thread.currentThread().getName() + <span class="string">"..."</span> + i);</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">500</span>);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Thread thread = <span class="keyword">new</span> Thread(runnable, <span class="string">"线程1"</span>);</span><br><span class="line">    thread.start();</span><br><span class="line">    <span class="comment">//加入主线程，阻塞主线程，直到加入线程执行完毕</span></span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">      thread.join();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">      e.printStackTrace();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">30</span>; i++) &#123;</span><br><span class="line">      System.out.println(Thread.currentThread().getName() + <span class="string">"................."</span> + i);</span><br><span class="line">      Thread.sleep(<span class="number">3000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestPriority</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">          System.out.println(Thread.currentThread().getName() + <span class="string">"........."</span> + i);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Thread t1 = <span class="keyword">new</span> Thread(runnable, <span class="string">"线程1"</span>);</span><br><span class="line">    Thread t2 = <span class="keyword">new</span> Thread(runnable, <span class="string">"线程2"</span>);</span><br><span class="line">    Thread t3 = <span class="keyword">new</span> Thread(runnable, <span class="string">"线程3"</span>);</span><br><span class="line">    <span class="comment">//设置线程的优先级，优先级高的线程表示获得CPU时间片的机会多，可以在任何地方设置优先级。</span></span><br><span class="line">    t1.setPriority(<span class="number">1</span>);</span><br><span class="line">    t3.setPriority(<span class="number">10</span>);</span><br><span class="line">    t1.start();</span><br><span class="line">    t2.start();</span><br><span class="line">    t3.start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="线程打断"><a href="#线程打断" class="headerlink" title="线程打断"></a>线程打断</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestInterruput</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"子线程开始休眠"</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">          Thread.sleep(<span class="number">20000</span>);</span><br><span class="line">          System.out.println(<span class="string">"自然醒"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">          <span class="comment">//e.printStackTrace();</span></span><br><span class="line">          System.out.println(<span class="string">"被打醒了..."</span>);</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Thread thread = <span class="keyword">new</span> Thread(runnable);</span><br><span class="line">    thread.start();</span><br><span class="line">    System.out.println(<span class="string">"20秒内，输入任意字符结束子线程"</span>);</span><br><span class="line">    Scanner input = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">    input.next();</span><br><span class="line">    <span class="comment">//打断子线程</span></span><br><span class="line">    thread.interrupt();</span><br><span class="line">    System.out.println(<span class="string">"主线程结束了"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="守护线程"><a href="#守护线程" class="headerlink" title="守护线程"></a>守护线程</h1><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestDaemon</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> InterruptedException </span>&#123;</span><br><span class="line">    Runnable runnable = <span class="keyword">new</span> Runnable() &#123;</span><br><span class="line">      <span class="meta">@Override</span></span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">50</span>; i++) &#123;</span><br><span class="line">          System.out.println(Thread.currentThread().getName() + <span class="string">"...."</span> + i);</span><br><span class="line">          <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">100</span>);</span><br><span class="line">          &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    Thread thread = <span class="keyword">new</span> Thread(runnable, <span class="string">"线程1"</span>);</span><br><span class="line">    <span class="comment">//默认前台线程，setDaemon(true)</span></span><br><span class="line">    thread.setDaemon(<span class="keyword">true</span>);</span><br><span class="line">    thread.start();</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++) &#123;</span><br><span class="line">      System.out.println(<span class="string">"主线程-------------"</span> + i);</span><br><span class="line">      Thread.sleep(<span class="number">100</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="线程安全问题"><a href="#线程安全问题" class="headerlink" title="线程安全问题"></a>线程安全问题</h1><ul>
<li>需求：A线程将”Hello“存入数组；B线程将”World“存入数组。</li>
<li>线程不安全：<ul>
<li>当多线程并发访问临街资源时，如果破坏原子操作，可能会造成数据不一致。</li>
<li>临界资源：共享资源（同一对象），一次仅允许一个线程使用，才可保证其正确性。</li>
<li>原子操作：不可分割的多步操作，被视作一个整体，其顺序和步骤不可打乱或缺省。</li>
</ul>
</li>
</ul>
<h2 id="线程同步"><a href="#线程同步" class="headerlink" title="线程同步"></a>线程同步</h2><h3 id="线程同步（1）"><a href="#线程同步（1）" class="headerlink" title="线程同步（1）"></a>线程同步（1）</h3><ul>
<li>同步代码块：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span>(临界资源对象)&#123;</span><br><span class="line">  <span class="comment">//对临界资源对象加锁</span></span><br><span class="line">  <span class="comment">//代码(原子操作)</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*注：</span></span><br><span class="line"><span class="comment"> *	每个对象都有一个互斥锁标记，用来分配给线程的。</span></span><br><span class="line"><span class="comment"> *	只有拥有对象互斥锁标记的线程，才能进入对该对象加锁的同步代码块。</span></span><br><span class="line"><span class="comment"> *	线程退出同步代码块时，会释放相应的互斥锁标记。</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WinTickets</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> tickets = <span class="number">100</span>;</span><br><span class="line">  <span class="comment">//锁:一般选择共享资源作为锁,多个线程必须使用同一把锁</span></span><br><span class="line">  <span class="comment">//private Object object = new Object();</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">      <span class="keyword">synchronized</span> (<span class="keyword">this</span>) &#123;	<span class="comment">//synchronized(object)</span></span><br><span class="line">        <span class="keyword">if</span> (tickets &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">          <span class="keyword">break</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">int</span> count = <span class="number">101</span>-tickets;</span><br><span class="line">        System.out.println(Thread.currentThread().getName() + <span class="string">"卖了第"</span> + count + <span class="string">"张票"</span>);</span><br><span class="line">        tickets--;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="线程同步（2）"><a href="#线程同步（2）" class="headerlink" title="线程同步（2）"></a>线程同步（2）</h3><ul>
<li>同步方法：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">synchronized</span> 返回值类型 方法名称(形参列表)&#123; </span><br><span class="line">  <span class="comment">//对当前对象(this)加锁</span></span><br><span class="line">  <span class="comment">// 代码(原子操作) </span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/*注:</span></span><br><span class="line"><span class="comment"> *只有拥有对象互斥锁标记的线程，才能进入该对象加锁的同步方法中。</span></span><br><span class="line"><span class="comment"> *线程退出同步方法时，会释放相应的互斥锁标记。</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WinTickets</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> tickets = <span class="number">100</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//锁:一般选择共享资源作为锁,多个线程必须使用同一把锁</span></span><br><span class="line">  <span class="comment">//private Object object = new Object();</span></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (<span class="keyword">true</span>) &#123;</span><br><span class="line">      <span class="comment">//同步代码块</span></span><br><span class="line">      <span class="keyword">if</span> (!sale()) &#123;</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//非静态方法，锁是this</span></span><br><span class="line">  <span class="comment">//静态方法，琐是 类名.class</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">boolean</span> <span class="title">sale</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (tickets &lt;= <span class="number">0</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">int</span> count = <span class="number">101</span> - tickets;</span><br><span class="line">    System.out.println(Thread.currentThread().getName() + <span class="string">"卖了第"</span> + count + <span class="string">"张票"</span>);</span><br><span class="line">    tickets--;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="同步规则："><a href="#同步规则：" class="headerlink" title="同步规则："></a>同步规则：</h3><ul>
<li><p>注意:</p>
<ul>
<li>只有在调用包含同步代码块的方法，或者同步方法时，才需要对象的锁标记。</li>
<li>如调用不包含同步代码块的方法，或普通方法时，则不需要锁标记，可直接调用。</li>
</ul>
</li>
<li><p>已知JDK中线程安全的类:</p>
<ul>
<li>StringBuffer</li>
<li>Vector</li>
<li>Hashtable</li>
<li>以上类中的公开方法，均为synchonized修饰的同步方法。</li>
</ul>
</li>
</ul>
<h2 id="死锁"><a href="#死锁" class="headerlink" title="死锁"></a>死锁</h2><ul>
<li>当第一个线程拥有A对象锁标记，并等待B对象锁标记，同时第二个线程拥有B对象锁标记，并等待A对象锁标记时，产生死锁。</li>
<li>一个线程可以同时拥有多个对象的锁标记，当线程阻塞时，不会释放已经拥有的锁标记，由此可能造成死锁。</li>
</ul>
<h1 id="线程通信"><a href="#线程通信" class="headerlink" title="线程通信"></a>线程通信</h1><ul>
<li><strong>等待:</strong><ul>
<li><strong>public final void wait()</strong></li>
<li><strong>public final void wait(long timeout)</strong></li>
<li><strong>必须在对obj加锁的同步代码块中。在一个线程中，调用obj.wait() 时，此线程会释放其拥有的所有锁标记。同时此线程阻塞在o的等待队列中。释放锁，进入等待队列。</strong></li>
</ul>
</li>
<li><strong>通知:</strong><ul>
<li><strong>public final void notify()</strong></li>
<li><strong>public final void notifyAll()</strong></li>
<li><strong>必须在对obj加锁的同步代码块中。从obj的Waiting中释放一个或全部线程。对自身 没有任何影响。</strong></li>
</ul>
</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">void notify()</span><br><span class="line">Wakes up a single thread that is waiting on this object’s monitor.</span><br><span class="line">译：唤醒在此对象监视器上等待的单个线程</span><br><span class="line"></span><br><span class="line">void notifyAll()</span><br><span class="line">Wakes up all threads that are waiting on this object’s monitor.</span><br><span class="line">译：唤醒在此对象监视器上等待的所有线程</span><br><span class="line"></span><br><span class="line">void wait( )</span><br><span class="line">Causes the current thread to wait until another thread invokes the notify() method or the notifyAll( ) method for this object.</span><br><span class="line">译：导致当前的线程等待，直到其他线程调用此对象的notify( ) 方法或 notifyAll( ) 方法</span><br><span class="line"></span><br><span class="line">void wait(long timeout)</span><br><span class="line">Causes the current thread to wait until either another thread invokes the notify( ) method or the notifyAll( ) method for this object, or a specified amount of time has elapsed.</span><br><span class="line">译：导致当前的线程等待，直到其他线程调用此对象的notify() 方法或 notifyAll() 方法，或者指定的时间过完。</span><br><span class="line"></span><br><span class="line">void wait(long timeout, int nanos)</span><br><span class="line">Causes the current thread to wait until another thread invokes the notify( ) method or the notifyAll( ) method for this object, or some other thread interrupts the current thread, or a certain amount of real time has elapsed.</span><br><span class="line">译：导致当前的线程等待，直到其他线程调用此对象的notify( ) 方法或 notifyAll( ) 方法，或者其他线程打断了当前线程，或者指定的时间过完。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">BankCard</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">double</span> money;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">boolean</span> flag;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">save</span><span class="params">(<span class="keyword">double</span> money)</span></span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (flag) &#123; <span class="comment">//如果有钱，等待</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.wait();    <span class="comment">//进入锁的等待队列等待，释放了cpu、锁</span></span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.money += money;</span><br><span class="line">    System.out.println(Thread.currentThread().getName() + <span class="string">"存了"</span> + money + <span class="string">", 余额是:"</span> + <span class="keyword">this</span>.money);</span><br><span class="line">    flag = <span class="keyword">true</span>;</span><br><span class="line">    <span class="comment">//唤醒</span></span><br><span class="line">    <span class="keyword">this</span>.notifyAll();</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">synchronized</span> <span class="keyword">void</span> <span class="title">take</span><span class="params">(<span class="keyword">double</span> money)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">while</span> (!flag) &#123; <span class="comment">//如果没钱，等待</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">        <span class="keyword">this</span>.wait();</span><br><span class="line">      &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">this</span>.money -= money;</span><br><span class="line">    System.out.println(Thread.currentThread().getName() + <span class="string">"取了"</span> + money + <span class="string">", 余额是:"</span> + <span class="keyword">this</span>.money);</span><br><span class="line">    flag = <span class="keyword">false</span>;</span><br><span class="line">    <span class="comment">//唤醒</span></span><br><span class="line">    <span class="keyword">this</span>.notifyAll();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AddMoney</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">private</span> BankCard bankCard;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">AddMoney</span><span class="params">(BankCard bankCard)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bankCard = bankCard;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">this</span>.bankCard.save(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SubMoney</span> <span class="keyword">implements</span> <span class="title">Runnable</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> BankCard bankCard;</span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">SubMoney</span><span class="params">(BankCard bankCard)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.bankCard = bankCard;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@Override</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++) &#123;</span><br><span class="line">      <span class="keyword">this</span>.bankCard.take(<span class="number">1000</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestBankCard</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//1. 创建银行卡</span></span><br><span class="line">    BankCard bankCard = <span class="keyword">new</span> BankCard();</span><br><span class="line">    <span class="comment">//2. 创建存和取</span></span><br><span class="line">    AddMoney add = <span class="keyword">new</span> AddMoney(bankCard);</span><br><span class="line">    SubMoney sub = <span class="keyword">new</span> SubMoney(bankCard);</span><br><span class="line">    <span class="comment">//3. 创建线程对象</span></span><br><span class="line">    Thread aa = <span class="keyword">new</span> Thread(add, <span class="string">"aa"</span>);</span><br><span class="line">    Thread bb = <span class="keyword">new</span> Thread(sub, <span class="string">"bb"</span>);</span><br><span class="line">    Thread cc = <span class="keyword">new</span> Thread(add, <span class="string">"cc"</span>);</span><br><span class="line">    Thread dd = <span class="keyword">new</span> Thread(sub, <span class="string">"dd"</span>);</span><br><span class="line">    <span class="comment">//4. 线程启动</span></span><br><span class="line">    aa.start();</span><br><span class="line">    bb.start();</span><br><span class="line">    cc.start();</span><br><span class="line">    dd.start();</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://replica.me/2020/08/04/集合/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReplicaSensei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/head01.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Valley of End">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/08/04/集合/" itemprop="url">集合</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-08-04T09:30:39+08:00">
                2020-08-04
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h1><h2 id="Collection"><a href="#Collection" class="headerlink" title="Collection"></a>Collection</h2><h3 id="Collection体系集合"><a href="#Collection体系集合" class="headerlink" title="Collection体系集合 "></a>Collection体系集合 <interface></interface></h3><ul>
<li>List<interface><ul>
<li>ArrayList<class></class></li>
<li>Vector<class></class></li>
<li>LinkedList<class></class></li>
</ul>
</interface></li>
<li>Set<interface><ul>
<li>HashSet<class></class></li>
<li>LinkedHashSet<class></class></li>
<li>SortedSet<class><ul>
<li>TreeSet<interface></interface></li>
</ul>
</class></li>
</ul>
</interface></li>
</ul>
<h3 id="Collection父接口"><a href="#Collection父接口" class="headerlink" title="Collection父接口"></a>Collection父接口</h3><ul>
<li>特点：代表一组任意类型的对象，无序、无下标</li>
<li>方法：</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建集合</span></span><br><span class="line">  Collection collection = <span class="keyword">new</span> ArrayList();</span><br><span class="line">  <span class="comment">//1.添加元素</span></span><br><span class="line">  collection.add(<span class="string">"上海"</span>);</span><br><span class="line">  collection.add(<span class="string">"北京"</span>);</span><br><span class="line">  collection.add(<span class="string">"杭州"</span>);</span><br><span class="line">  collection.add(<span class="string">"苏州"</span>);</span><br><span class="line">  collection.add(<span class="string">"南京"</span>);</span><br><span class="line">  collection.add(<span class="string">"南京"</span>);</span><br><span class="line">  System.out.println(<span class="string">"元素个数:"</span> + collection.size());</span><br><span class="line">  System.out.println(<span class="string">"直接打印:"</span> + collection.toString());</span><br><span class="line">  <span class="comment">//2.1 删除一个元素</span></span><br><span class="line">  collection.remove(<span class="string">"南京"</span>);</span><br><span class="line">  System.out.println(<span class="string">"直接打印:"</span> + collection.toString());</span><br><span class="line">  <span class="comment">//2.2 清空元素</span></span><br><span class="line">  <span class="comment">//collection.clear();</span></span><br><span class="line">  System.out.println(<span class="string">"直接打印:"</span> + collection.toString());</span><br><span class="line">  <span class="comment">//3.遍历[重点] 增强for（编译器中语法为迭代器，不可删除操作）</span></span><br><span class="line">  System.out.println(<span class="string">"============增强for============"</span>);</span><br><span class="line">  <span class="keyword">for</span> (Object o : collection) &#123;</span><br><span class="line">    System.out.print (o + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  <span class="comment">//使用迭代器遍历集合</span></span><br><span class="line">  System.out.println(<span class="string">"============迭代器============="</span>);</span><br><span class="line">  Iterator it = collection.iterator();</span><br><span class="line">  <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">    <span class="comment">//Object o = it.next();</span></span><br><span class="line">    <span class="comment">//System.out.println(o);</span></span><br><span class="line">    System.out.print(it.next() + <span class="string">" "</span>);</span><br><span class="line">    <span class="comment">//删除</span></span><br><span class="line">    it.remove();</span><br><span class="line">    <span class="comment">//使用集合的删除方法</span></span><br><span class="line">    <span class="comment">//迭代过程中不能使用集合的删除方法，否则并发修改异常</span></span><br><span class="line">    <span class="comment">//collection.remove(o); //java.util.ConcurrentModificationException</span></span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  System.out.println(<span class="string">"元素个数："</span> + collection.size());</span><br><span class="line">  <span class="comment">//4.判断</span></span><br><span class="line">  <span class="comment">//4.1 判断元素是否存在</span></span><br><span class="line">  System.out.println(collection.contains(<span class="string">"北京"</span>));</span><br><span class="line">  <span class="comment">//4.2 判断是否为空</span></span><br><span class="line">  System.out.println(collection.isEmpty());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建集合</span></span><br><span class="line">  Collection students = <span class="keyword">new</span> ArrayList();</span><br><span class="line">  <span class="comment">//1.添加元素</span></span><br><span class="line">  Student aa = <span class="keyword">new</span> Student(<span class="string">"aa"</span>, <span class="number">120</span>);</span><br><span class="line">  students.add(aa);</span><br><span class="line">  students.add(<span class="keyword">new</span> Student(<span class="string">"aa"</span>, <span class="number">19</span>));</span><br><span class="line">  students.add(<span class="keyword">new</span> Student(<span class="string">"bb"</span>, <span class="number">20</span>));</span><br><span class="line">  students.add(<span class="keyword">new</span> Student(<span class="string">"cc"</span>, <span class="number">21</span>));</span><br><span class="line">  System.out.println(<span class="string">"元素个数:"</span> + students.size());</span><br><span class="line">  System.out.println(<span class="string">"直接打印:"</span> + students.toString());</span><br><span class="line">  <span class="comment">//2.删除</span></span><br><span class="line">  <span class="comment">//2.1 删除一个，ArrayList中比较的事equals方法</span></span><br><span class="line">  <span class="comment">//students.remove(aa);</span></span><br><span class="line">  <span class="comment">//System.out.println("删除之后:" + students.size());</span></span><br><span class="line">  <span class="comment">//3.遍历</span></span><br><span class="line">  <span class="comment">//3.1 增强for</span></span><br><span class="line">  System.out.println(<span class="string">"-----------增强for----------"</span>);</span><br><span class="line">  <span class="keyword">for</span> (Object student : students) &#123;</span><br><span class="line">    System.out.print(student.toString() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  <span class="comment">//3.2 使用迭代器</span></span><br><span class="line">  Iterator it = students.iterator();</span><br><span class="line">  <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">    Object obj = it.next();</span><br><span class="line">    System.out.print(obj + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  <span class="comment">//4.判断</span></span><br><span class="line">  <span class="comment">//4.1 判断是否存在</span></span><br><span class="line">  System.out.println(students.contains(<span class="keyword">new</span> Student(<span class="string">"aa"</span>, <span class="number">120</span>)));</span><br><span class="line">  <span class="comment">//4.2 判断是否为空</span></span><br><span class="line">  System.out.println(students.isEmpty());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="List集合"><a href="#List集合" class="headerlink" title="List集合"></a>List集合</h2><ul>
<li><p>特点：</p>
<ul>
<li>有序</li>
<li>有下标</li>
<li>元素可以重复</li>
</ul>
</li>
<li><p>方法</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建集合</span></span><br><span class="line">  List list = <span class="keyword">new</span> ArrayList();</span><br><span class="line">  <span class="comment">//1添加数字数据(自动装箱)</span></span><br><span class="line">  list.add(<span class="number">20</span>);</span><br><span class="line">  list.add(<span class="number">30</span>);</span><br><span class="line">  list.add(<span class="number">40</span>);</span><br><span class="line">  list.add(<span class="number">50</span>);</span><br><span class="line">  list.add(<span class="number">60</span>);</span><br><span class="line">  System.out.println(<span class="string">"元素个数:"</span> + list.size());</span><br><span class="line">  System.out.println(list.toString());</span><br><span class="line">  <span class="comment">//2删除操作</span></span><br><span class="line">  <span class="comment">//      list.remove(0);</span></span><br><span class="line">  <span class="comment">//		list.remove(new Integer(20));</span></span><br><span class="line">  <span class="comment">//		System.out.println("删除元素:"+list.size());</span></span><br><span class="line">  <span class="comment">//		System.out.println(list.toString());</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//3补充方法subList：返回子集合,含头不含尾</span></span><br><span class="line">  List subList = list.subList(<span class="number">1</span>, <span class="number">3</span>);</span><br><span class="line">  System.out.println(subList.toString());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="List实现类"><a href="#List实现类" class="headerlink" title="List实现类"></a>List实现类</h3><ul>
<li>ArrayList:<ul>
<li>数组结构实现，查询快、增删慢。</li>
<li>JDK1.2版本，运行效率快，线程不安全。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建集合  size 0  容量 0，扩容原来的1.5倍</span></span><br><span class="line">  ArrayList arrayList=<span class="keyword">new</span> ArrayList();</span><br><span class="line">  <span class="comment">//1添加元素</span></span><br><span class="line">  Student s1=<span class="keyword">new</span> Student(<span class="string">"刘德华"</span>, <span class="number">20</span>);</span><br><span class="line">  Student s2=<span class="keyword">new</span> Student(<span class="string">"郭富城"</span>, <span class="number">22</span>);</span><br><span class="line">  Student s3=<span class="keyword">new</span> Student(<span class="string">"梁朝伟"</span>, <span class="number">18</span>);</span><br><span class="line">  arrayList.add(s1);</span><br><span class="line">  arrayList.add(s2);</span><br><span class="line">  arrayList.add(s3);</span><br><span class="line">  System.out.println(<span class="string">"元素个数:"</span>+arrayList.size());</span><br><span class="line">  System.out.println(arrayList.toString());</span><br><span class="line">  <span class="comment">//2删除元素</span></span><br><span class="line">  <span class="comment">//		arrayList.remove(new Student("刘德华", 20));//equals(this==obj)</span></span><br><span class="line">  <span class="comment">//		System.out.println("删除之后:"+arrayList.size());</span></span><br><span class="line">  <span class="comment">//3遍历元素【重点】</span></span><br><span class="line">  <span class="comment">//3.1使用迭代器</span></span><br><span class="line">  System.out.println(<span class="string">"-------3.1使用迭代器-----"</span>);</span><br><span class="line">  Iterator it=arrayList.iterator();</span><br><span class="line">  <span class="keyword">while</span>(it.hasNext()) &#123;</span><br><span class="line">    Student s=(Student)it.next();</span><br><span class="line">    System.out.println(s.toString());</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//3.2列表迭代器</span></span><br><span class="line">  ListIterator lit=arrayList.listIterator();</span><br><span class="line">  System.out.println(<span class="string">"-------3.2使用列表迭代器---------"</span>);</span><br><span class="line">  <span class="keyword">while</span>(lit.hasNext()) &#123;</span><br><span class="line">    Student s=(Student)lit.next();</span><br><span class="line">    System.out.println(s.toString());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  System.out.println(<span class="string">"-------3.2使用列表迭代器逆序---------"</span>);</span><br><span class="line">  <span class="keyword">while</span>(lit.hasPrevious()) &#123;</span><br><span class="line">    Student s=(Student)lit.previous();</span><br><span class="line">    System.out.println(s.toString());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//4判断</span></span><br><span class="line">  System.out.println(arrayList.contains(<span class="keyword">new</span> Student(<span class="string">"梁朝伟"</span>, <span class="number">18</span>)));</span><br><span class="line">  System.out.println(arrayList.isEmpty());</span><br><span class="line"></span><br><span class="line">  <span class="comment">//5查找</span></span><br><span class="line">  System.out.println(arrayList.indexOf(<span class="keyword">new</span> Student(<span class="string">"梁朝伟"</span>, <span class="number">18</span>)));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>Vector<ul>
<li>数组结构实现，查询快、增删慢。</li>
<li>JDK1.0版本，运行效率慢，线程安全。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建集合</span></span><br><span class="line">  Vector vector = <span class="keyword">new</span> Vector();</span><br><span class="line">  <span class="comment">//1.添加元素</span></span><br><span class="line">  vector.add(<span class="string">"榴莲"</span>);</span><br><span class="line">  vector.add(<span class="string">"樱桃"</span>);</span><br><span class="line">  vector.add(<span class="string">"桃子"</span>);</span><br><span class="line">  vector.add(<span class="string">"葡萄"</span>);</span><br><span class="line">  vector.add(<span class="string">"西瓜"</span>);</span><br><span class="line"></span><br><span class="line">  System.out.println(vector.toString());</span><br><span class="line"></span><br><span class="line">  <span class="comment">//2.删除</span></span><br><span class="line">  <span class="comment">//3.遍历</span></span><br><span class="line">  <span class="comment">//3.1 增强for</span></span><br><span class="line">  <span class="comment">//3.2 for</span></span><br><span class="line">  <span class="comment">//3.3 迭代器</span></span><br><span class="line">  <span class="comment">//3.4 列表迭代器</span></span><br><span class="line">  <span class="comment">//3.5 枚举器</span></span><br><span class="line">  Enumeration enumeration = vector.elements();</span><br><span class="line">  <span class="keyword">while</span> (enumeration.hasMoreElements()) &#123;</span><br><span class="line">    System.out.print(enumeration.nextElement() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>LinkedList<ul>
<li>链表结构实现，增删快、查询慢。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建集合</span></span><br><span class="line">  LinkedList linkedList = <span class="keyword">new</span> LinkedList();</span><br><span class="line">  Student s1 = <span class="keyword">new</span> Student(<span class="string">"刘德华"</span>, <span class="number">20</span>);</span><br><span class="line">  Student s2 = <span class="keyword">new</span> Student(<span class="string">"郭富城"</span>, <span class="number">22</span>);</span><br><span class="line">  Student s3 = <span class="keyword">new</span> Student(<span class="string">"梁朝伟"</span>, <span class="number">18</span>);</span><br><span class="line">  <span class="comment">//1.添加元素</span></span><br><span class="line">  linkedList.add(s1);</span><br><span class="line">  linkedList.add(s2);</span><br><span class="line">  linkedList.add(s3);</span><br><span class="line">  System.out.println(<span class="string">"元素个数:"</span> + linkedList.size());</span><br><span class="line">  System.out.println(<span class="string">"直接打印:"</span> + linkedList.toString());</span><br><span class="line">  <span class="comment">//2.删除</span></span><br><span class="line">  <span class="comment">//2.1 删除一个元素</span></span><br><span class="line">  <span class="comment">//        linkedList.remove(s1);</span></span><br><span class="line">  <span class="comment">//        System.out.println("删除之后:" + linkedList.toString());</span></span><br><span class="line">  <span class="comment">//2.2 清空</span></span><br><span class="line">  <span class="comment">//3.遍历</span></span><br><span class="line">  <span class="comment">//3.1 增强for</span></span><br><span class="line">  <span class="comment">//3.2 for</span></span><br><span class="line">  <span class="comment">//3.3 迭代器</span></span><br><span class="line">  Iterator it = linkedList.iterator();</span><br><span class="line">  <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">    System.out.print(it.next() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  <span class="comment">//3.4 列表迭代器</span></span><br><span class="line">  System.out.println(<span class="string">"--------从前向后---------"</span>);</span><br><span class="line">  ListIterator lit = linkedList.listIterator();</span><br><span class="line">  <span class="keyword">while</span> (lit.hasNext()) &#123;</span><br><span class="line">    System.out.print(lit.next() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  System.out.println(<span class="string">"--------从后向前---------"</span>);</span><br><span class="line">  <span class="keyword">while</span> (lit.hasPrevious()) &#123;</span><br><span class="line">    System.out.print(lit.previous() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  <span class="comment">//4.判断</span></span><br><span class="line">  System.out.println(linkedList.contains(s2));</span><br><span class="line">  System.out.println(linkedList.isEmpty());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="ArrayList源码分析"><a href="#ArrayList源码分析" class="headerlink" title="ArrayList源码分析"></a>ArrayList源码分析</h3><ul>
<li><p>分析:</p>
<ul>
<li><p>DEFAULT_CAPACITY = 10;默认容量</p>
</li>
<li><p>如果没有向集合中添加任何元素时，容量0,添加一个元素之后 容量10 </p>
</li>
<li><p>每次扩容大小是原来的1.5倍</p>
</li>
<li><p>elementData存放元素的数组</p>
</li>
<li><p>size 实际元素个数</p>
</li>
<li><p>add() 添加元素</p>
</li>
</ul>
</li>
</ul>
<h2 id="数据结构-栈、队列"><a href="#数据结构-栈、队列" class="headerlink" title="数据结构:栈、队列"></a>数据结构:栈、队列</h2><ul>
<li><p>栈:是一种先进后出的数据结构。</p>
<ul>
<li><p>stack类:继承Vector类</p>
</li>
<li><p>push方法入栈、pop方法出栈</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建集合</span></span><br><span class="line">  LinkedList stack = <span class="keyword">new</span> LinkedList();</span><br><span class="line">  LinkedList stack2 = <span class="keyword">new</span> LinkedList();</span><br><span class="line">  <span class="comment">//1.入栈</span></span><br><span class="line">  stack.push(<span class="string">"吴亦凡"</span>);</span><br><span class="line">  stack.push(<span class="string">"蔡徐坤"</span>);</span><br><span class="line">  stack.push(<span class="string">"鹿晗"</span>);</span><br><span class="line">  System.out.println(stack.toString());</span><br><span class="line">  System.out.println(<span class="string">"出栈"</span>);</span><br><span class="line">  System.out.println(stack2.toString());</span><br><span class="line">  <span class="comment">//2.出栈</span></span><br><span class="line">  <span class="keyword">int</span> count = stack.size();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">    System.out.print(stack.pop() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>​    </p>
<ul>
<li><p>队列:是一种先进先出的数据结构。</p>
<ul>
<li><p>Queue接口:继承Collection接口</p>
</li>
<li><p>offer方法入队、pop方法出队</p>
</li>
<li><p>LinkedList实现了Queue接口</p>
</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建队列</span></span><br><span class="line">  Queue queue = <span class="keyword">new</span> LinkedList&lt;&gt;();</span><br><span class="line">  <span class="comment">//1.入队(添加元素)</span></span><br><span class="line">  queue.offer(<span class="string">"吴亦凡"</span>);</span><br><span class="line">  queue.offer(<span class="string">"蔡徐坤"</span>);</span><br><span class="line">  queue.offer(<span class="string">"鹿晗"</span>);</span><br><span class="line">  System.out.println(queue.toString());</span><br><span class="line">  <span class="comment">//2.出队(删除元素)</span></span><br><span class="line">  System.out.println(<span class="string">"出队"</span>);</span><br><span class="line">  <span class="keyword">int</span> count = queue.size();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; count; i++) &#123;</span><br><span class="line">    System.out.print(queue.poll() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Generic</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">  T t;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">(T t)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.t = t;</span><br><span class="line">    System.out.println(t);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Generic1</span> </span>&#123;</span><br><span class="line">  <span class="keyword">public</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">show</span><span class="params">(T t)</span></span>&#123;</span><br><span class="line">    System.out.println(t);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestGeneric</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Generic&lt;String&gt; generic = <span class="keyword">new</span> Generic&lt;&gt;();</span><br><span class="line">    generic.show(<span class="string">"haha"</span>);</span><br><span class="line">    Generic&lt;Integer&gt; generic1 = <span class="keyword">new</span> Generic&lt;&gt;();</span><br><span class="line">    generic1.show(<span class="number">12</span>);</span><br><span class="line"></span><br><span class="line">    Generic1 generic2 = <span class="keyword">new</span> Generic1();</span><br><span class="line">    generic2.show(<span class="string">"hahaha"</span>);</span><br><span class="line">    Generic1 generic11 = <span class="keyword">new</span> Generic1();</span><br><span class="line">    generic11.show(<span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">    TestUsb testUsb = <span class="keyword">new</span> TestUsb();</span><br><span class="line">    System.out.println(testUsb.service(<span class="keyword">new</span> Student()).toString());</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h2><ul>
<li><p>特点：</p>
<ul>
<li>无序</li>
<li>无下标</li>
<li>元素不可重复</li>
</ul>
</li>
<li><p>方法:</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建集合</span></span><br><span class="line">  Set&lt;Student&gt; set = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">  <span class="comment">//1.添加元素</span></span><br><span class="line">  Student s1 = <span class="keyword">new</span> Student(<span class="string">"华为"</span>, <span class="number">10</span>);</span><br><span class="line">  set.add(s1);</span><br><span class="line">  set.add(<span class="keyword">new</span> Student(<span class="string">"小米"</span>, <span class="number">12</span>));</span><br><span class="line">  set.add(<span class="keyword">new</span> Student(<span class="string">"一加"</span>, <span class="number">20</span>));</span><br><span class="line">  set.add(<span class="keyword">new</span> Student(<span class="string">"魅族"</span>, <span class="number">23</span>));</span><br><span class="line">  set.add(<span class="keyword">new</span> Student(<span class="string">"锤子"</span>, <span class="number">20</span>));</span><br><span class="line">  set.add(<span class="keyword">new</span> Student(<span class="string">"小米"</span>, <span class="number">10</span>));</span><br><span class="line">  System.out.println(<span class="string">"元素个数:"</span> + set.size());</span><br><span class="line">  System.out.println(<span class="string">"直接打印:"</span> + set.toString());</span><br><span class="line">  <span class="comment">//2.删除</span></span><br><span class="line">  <span class="comment">//2.1 删除一个元素</span></span><br><span class="line">  set.remove(<span class="keyword">new</span> Student(<span class="string">"锤子"</span>, <span class="number">20</span>));</span><br><span class="line">  <span class="comment">//2.2 清空</span></span><br><span class="line">  <span class="comment">//set.clear();</span></span><br><span class="line">  <span class="comment">//3.遍历</span></span><br><span class="line">  <span class="comment">//3.1 增强for</span></span><br><span class="line">  System.out.println(<span class="string">"---------------增强for--------------"</span>);</span><br><span class="line">  <span class="keyword">for</span> (Student s : set) &#123;</span><br><span class="line">    System.out.print(s.toString() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  System.out.println(<span class="string">"---------------迭代器---------------"</span>);</span><br><span class="line">  <span class="comment">//3.2 使用迭代器</span></span><br><span class="line">  Iterator&lt;Student&gt; it = set.iterator();</span><br><span class="line">  <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">    System.out.print(it.next() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  System.out.println(<span class="string">"-----------------------------------"</span>);</span><br><span class="line">  <span class="comment">//4.判断</span></span><br><span class="line">  <span class="comment">//4.1 是否存在</span></span><br><span class="line">  System.out.println(set.contains(s1));</span><br><span class="line">  <span class="comment">//4.2 是否为空</span></span><br><span class="line">  System.out.println(set.isEmpty());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="HashSet"><a href="#HashSet" class="headerlink" title="HashSet"></a>HashSet</h3><ul>
<li>存储结构:哈希表</li>
<li>存储重复依据:hashCode和equals方法</li>
<li>存储过程:<ul>
<li>根据hashCode计算存储位置，如果此位置没有元素，则添加。</li>
<li>如果此位置有元素，再比较equals，如果equals相同，拒绝添加，否则形成链表添加。</li>
</ul>
</li>
<li>方法:</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建集合</span></span><br><span class="line">  HashSet&lt;Student&gt; hashSet = <span class="keyword">new</span> HashSet&lt;&gt;();</span><br><span class="line">  Student s1 = <span class="keyword">new</span> Student(<span class="string">"刘备"</span>, <span class="number">10</span>);</span><br><span class="line">  Student s2 = <span class="keyword">new</span> Student(<span class="string">"关羽"</span>, <span class="number">20</span>);</span><br><span class="line">  Student s3 = <span class="keyword">new</span> Student(<span class="string">"张飞"</span>, <span class="number">13</span>);</span><br><span class="line">  <span class="comment">//1. 添加元素</span></span><br><span class="line">  hashSet.add(s1);</span><br><span class="line">  hashSet.add(s2);</span><br><span class="line">  hashSet.add(s3);</span><br><span class="line">  System.out.println(<span class="string">"元素个数:"</span> + hashSet.size());</span><br><span class="line">  System.out.println(<span class="string">"直接打印:"</span> + hashSet.toString());</span><br><span class="line">  <span class="comment">//2. 删除</span></span><br><span class="line">  <span class="comment">//        hashSet.remove(s1);</span></span><br><span class="line">  <span class="comment">//        System.out.println("删除之后:" + hashSet.toString());</span></span><br><span class="line">  <span class="comment">//3. 遍历</span></span><br><span class="line">  <span class="comment">//3.1 增强for</span></span><br><span class="line">  <span class="comment">//3.2 迭代器</span></span><br><span class="line">  System.out.println(<span class="string">"---------------迭代器---------------"</span>);</span><br><span class="line">  Iterator&lt;Student&gt; it = hashSet.iterator();</span><br><span class="line">  <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">    System.out.print(it.next() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  System.out.println(<span class="string">"-----------------------------------"</span>);</span><br><span class="line">  <span class="comment">//4. 判断</span></span><br><span class="line">  <span class="comment">//4.1 是否存在</span></span><br><span class="line">  System.out.println(hashSet.contains(s1));</span><br><span class="line">  <span class="comment">//4.2 是否为空</span></span><br><span class="line">  System.out.println(hashSet.isEmpty());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="TreeSet"><a href="#TreeSet" class="headerlink" title="TreeSet"></a>TreeSet</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建集合</span></span><br><span class="line">  TreeSet&lt;Student&gt; treeSet = <span class="keyword">new</span> TreeSet&lt;&gt;();</span><br><span class="line">  <span class="comment">//1. 添加元素</span></span><br><span class="line">  Student s1 = <span class="keyword">new</span> Student(<span class="string">"刘备"</span>, <span class="number">17</span>);</span><br><span class="line">  Student s2 = <span class="keyword">new</span> Student(<span class="string">"关羽"</span>, <span class="number">12</span>);</span><br><span class="line">  Student s3 = <span class="keyword">new</span> Student(<span class="string">"张飞"</span>, <span class="number">12</span>);</span><br><span class="line">  treeSet.add(s1);</span><br><span class="line">  treeSet.add(s2);</span><br><span class="line">  treeSet.add(s3);</span><br><span class="line">  treeSet.add(s3);</span><br><span class="line">  System.out.println(<span class="string">"元素个数:"</span> + treeSet.size());</span><br><span class="line">  System.out.println(<span class="string">"直接打印:"</span> + treeSet.toString());</span><br><span class="line">  <span class="comment">//2. 删除</span></span><br><span class="line">  treeSet.remove(<span class="keyword">new</span> Student(<span class="string">"刘备"</span>, <span class="number">17</span>));</span><br><span class="line">  System.out.println(<span class="string">"删除后"</span> + treeSet.toString());</span><br><span class="line">  <span class="comment">//3. 遍历</span></span><br><span class="line">  <span class="comment">//3.1 增强for</span></span><br><span class="line">  <span class="comment">//3.2 迭代器</span></span><br><span class="line">  System.out.println(<span class="string">"---------------迭代器---------------"</span>);</span><br><span class="line">  Iterator&lt;Student&gt; it = treeSet.iterator();</span><br><span class="line">  <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">    System.out.print(it.next() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  System.out.println(<span class="string">"-----------------------------------"</span>);</span><br><span class="line">  <span class="comment">//4. 判断</span></span><br><span class="line">  <span class="comment">//4.1 判断存在</span></span><br><span class="line">  System.out.println(treeSet.contains(<span class="keyword">new</span> Student(<span class="string">"张飞"</span>, <span class="number">12</span>)));</span><br><span class="line">  <span class="comment">//4.2 判断为空</span></span><br><span class="line">  System.out.println(treeSet.isEmpty());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="红黑树"><a href="#红黑树" class="headerlink" title="红黑树"></a>红黑树</h2><ul>
<li><p>储存结构:红黑树</p>
</li>
<li><p>特点:</p>
<ul>
<li>无序</li>
<li>没有下标</li>
<li>不能重复</li>
<li>对元素进行排序</li>
</ul>
</li>
<li><p>重复依据:Comparable接口中compareTo()，如果compareTo方法返回的是0，重复元素，拒绝添加。</p>
</li>
<li><p>方法:</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建集合</span></span><br><span class="line">  TreeSet&lt;Student&gt; treeSet = <span class="keyword">new</span> TreeSet&lt;&gt;();</span><br><span class="line">  <span class="comment">//1. 添加元素</span></span><br><span class="line">  Student s1 = <span class="keyword">new</span> Student(<span class="string">"刘备"</span>, <span class="number">17</span>);</span><br><span class="line">  Student s2 = <span class="keyword">new</span> Student(<span class="string">"关羽"</span>, <span class="number">12</span>);</span><br><span class="line">  Student s3 = <span class="keyword">new</span> Student(<span class="string">"张飞"</span>, <span class="number">12</span>);</span><br><span class="line">  treeSet.add(s1);</span><br><span class="line">  treeSet.add(s2);</span><br><span class="line">  treeSet.add(s3);</span><br><span class="line">  treeSet.add(s3);</span><br><span class="line">  System.out.println(<span class="string">"元素个数:"</span> + treeSet.size());</span><br><span class="line">  System.out.println(<span class="string">"直接打印:"</span> + treeSet.toString());</span><br><span class="line">  <span class="comment">//2. 删除</span></span><br><span class="line">  treeSet.remove(<span class="keyword">new</span> Student(<span class="string">"刘备"</span>, <span class="number">17</span>));</span><br><span class="line">  System.out.println(<span class="string">"删除后"</span> + treeSet.toString());</span><br><span class="line">  <span class="comment">//3. 遍历</span></span><br><span class="line">  <span class="comment">//3.1 增强for</span></span><br><span class="line">  <span class="comment">//3.2 迭代器</span></span><br><span class="line">  System.out.println(<span class="string">"---------------迭代器---------------"</span>);</span><br><span class="line">  Iterator&lt;Student&gt; it = treeSet.iterator();</span><br><span class="line">  <span class="keyword">while</span> (it.hasNext()) &#123;</span><br><span class="line">    System.out.print(it.next() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  System.out.println(<span class="string">"-----------------------------------"</span>);</span><br><span class="line">  <span class="comment">//4. 判断</span></span><br><span class="line">  <span class="comment">//4.1 判断存在</span></span><br><span class="line">  System.out.println(treeSet.contains(<span class="keyword">new</span> Student(<span class="string">"张飞"</span>, <span class="number">12</span>)));</span><br><span class="line">  <span class="comment">//4.2 判断为空</span></span><br><span class="line">  System.out.println(treeSet.isEmpty());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h2><ul>
<li>特点:<ul>
<li>成为”映射“存储一对数据(Key-Value)。</li>
<li>键不可重复，值可以重复。</li>
<li>无序、无下标。</li>
</ul>
</li>
<li>方法:</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建集合</span></span><br><span class="line">  Map&lt;String, String&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">  <span class="comment">//1. 添加元素</span></span><br><span class="line">  map.put(<span class="string">"cn"</span>, <span class="string">"中国"</span>);</span><br><span class="line">  map.put(<span class="string">"usa"</span>, <span class="string">"美国"</span>);</span><br><span class="line">  map.put(<span class="string">"uk"</span>, <span class="string">"英国"</span>);</span><br><span class="line">  map.put(<span class="string">"kor"</span>, <span class="string">"韩国"</span>);</span><br><span class="line">  map.put(<span class="string">"usa"</span>, <span class="string">"美利坚合众国"</span>);</span><br><span class="line">  System.out.println(<span class="string">"元素个数:"</span> + map.size());</span><br><span class="line">  System.out.println(<span class="string">"直接打印:"</span> + map.toString());</span><br><span class="line">  <span class="comment">//2. 删除</span></span><br><span class="line">  <span class="comment">//2.1 删除单个</span></span><br><span class="line">  map.remove(<span class="string">"usa"</span>);</span><br><span class="line">  System.out.println(<span class="string">"删除之后:"</span> + map.toString());</span><br><span class="line">  <span class="comment">//2.2 清空</span></span><br><span class="line">  <span class="comment">//        map.clear();</span></span><br><span class="line">  <span class="comment">//3. 遍历</span></span><br><span class="line">  <span class="comment">//3.1 keySet()遍历:返回时键的set集合</span></span><br><span class="line">  System.out.println(<span class="string">"-----------keySet----------"</span>);</span><br><span class="line">  Set&lt;String&gt; keySets = map.keySet();</span><br><span class="line">  <span class="keyword">for</span> (String keySet : keySets) &#123;</span><br><span class="line">    System.out.print(keySet + <span class="string">"=="</span> + map.get(keySet) + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  <span class="comment">//3.2 entrySet()遍历:返回键值对映射的set的集合</span></span><br><span class="line">  System.out.println(<span class="string">"-----------entrySet----------"</span>);</span><br><span class="line">  Set&lt;Map.Entry&lt;String, String&gt;&gt; entrySets = map.entrySet();</span><br><span class="line">  <span class="keyword">for</span> (Map.Entry&lt;String, String &gt; entrySet : entrySets) &#123;</span><br><span class="line">    System.out.print(entrySet.getKey() + <span class="string">"=="</span> + entrySet.getValue() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  System.out.println(<span class="string">"-----------------------------"</span>);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//4. 判断</span></span><br><span class="line">  System.out.println(map.containsKey(<span class="string">"uk"</span>));</span><br><span class="line">  System.out.println(map.containsValue(<span class="string">"英国"</span>));</span><br><span class="line">  System.out.println(map.isEmpty());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="HashMap："><a href="#HashMap：" class="headerlink" title="HashMap："></a>HashMap：</h3><ul>
<li><p>JDK1.2版本，线程不安全，运行效率快。</p>
</li>
<li><p>允许用null作为key或是value。</p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建集合</span></span><br><span class="line">  HashMap&lt;Person, String&gt; hashMap = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">  <span class="comment">//1. 添加元素</span></span><br><span class="line">  Person p1 = <span class="keyword">new</span> Person(<span class="string">"aaa"</span>, <span class="number">20</span>);</span><br><span class="line">  Person p2 = <span class="keyword">new</span> Person(<span class="string">"bbb"</span>, <span class="number">21</span>);</span><br><span class="line">  Person p3 = <span class="keyword">new</span> Person(<span class="string">"ccc"</span>, <span class="number">22</span>);</span><br><span class="line">  Person p4 = <span class="keyword">new</span> Person(<span class="string">"ccc"</span>, <span class="number">22</span>);</span><br><span class="line">  hashMap.put(p1, <span class="string">"北京"</span>);</span><br><span class="line">  hashMap.put(p2, <span class="string">"上海"</span>);</span><br><span class="line">  hashMap.put(p3, <span class="string">"广东"</span>);</span><br><span class="line">  hashMap.put(p3, <span class="string">"深圳"</span>);</span><br><span class="line">  hashMap.put(p4, <span class="string">"杭州"</span>);</span><br><span class="line">  System.out.println(<span class="string">"元素个数:"</span> + hashMap.size());</span><br><span class="line">  System.out.println(<span class="string">"直接打印:"</span> + hashMap.toString());</span><br><span class="line">  <span class="comment">//2. 删除</span></span><br><span class="line">  hashMap.remove(<span class="keyword">new</span> Person(<span class="string">"ccc"</span>, <span class="number">22</span>));</span><br><span class="line">  System.out.println(<span class="string">"删除之后:"</span> + hashMap.toString());   <span class="comment">//重写hashCode和equals后可删除</span></span><br><span class="line">  <span class="comment">//3. 遍历</span></span><br><span class="line">  <span class="comment">//3.1 使用keySet</span></span><br><span class="line">  System.out.println(<span class="string">"-----------keySet----------"</span>);</span><br><span class="line">  Set&lt;Person&gt; keySets = hashMap.keySet();</span><br><span class="line">  <span class="keyword">for</span> (Person keySet : keySets) &#123;</span><br><span class="line">    System.out.print(keySet + <span class="string">"=="</span> + hashMap.get(keySet) + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  <span class="comment">//3.2 entrySet()遍历:返回键值对映射的set的集合</span></span><br><span class="line">  System.out.println(<span class="string">"-----------entrySet----------"</span>);</span><br><span class="line">  Set&lt;Map.Entry&lt;Person, String&gt;&gt; entrySets = hashMap.entrySet();</span><br><span class="line">  <span class="keyword">for</span> (Map.Entry&lt;Person, String &gt; entrySet : entrySets) &#123;</span><br><span class="line">    System.out.print(entrySet.getKey() + <span class="string">"=="</span> + entrySet.getValue() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  System.out.println(<span class="string">"-----------------------------"</span>);</span><br><span class="line">  <span class="comment">//4. 判断</span></span><br><span class="line">  System.out.println(hashMap.containsKey(<span class="keyword">new</span> Person(<span class="string">"bbb"</span>, <span class="number">21</span>)));</span><br><span class="line">  System.out.println(hashMap.containsValue(<span class="string">"上海"</span>));</span><br><span class="line">  System.out.println(hashMap.isEmpty());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="TreeMap"><a href="#TreeMap" class="headerlink" title="TreeMap:"></a>TreeMap:</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//创建集合</span></span><br><span class="line">  TreeMap&lt;Person, String&gt; treeMap = <span class="keyword">new</span> TreeMap&lt;&gt;();</span><br><span class="line">  Person p1 = <span class="keyword">new</span> Person(<span class="string">"aaa"</span>, <span class="number">20</span>);</span><br><span class="line">  Person p2 = <span class="keyword">new</span> Person(<span class="string">"bbb"</span>, <span class="number">21</span>);</span><br><span class="line">  Person p3 = <span class="keyword">new</span> Person(<span class="string">"ccc"</span>, <span class="number">22</span>);</span><br><span class="line">  <span class="comment">//1. 添加元素</span></span><br><span class="line">  treeMap.put(p1, <span class="string">"北京"</span>);</span><br><span class="line">  treeMap.put(p2, <span class="string">"上海"</span>);</span><br><span class="line">  treeMap.put(p3, <span class="string">"广东"</span>);</span><br><span class="line">  System.out.println(<span class="string">"元素个数:"</span> + treeMap.size());</span><br><span class="line">  System.out.println(<span class="string">"直接打印:"</span> + treeMap.toString());</span><br><span class="line">  <span class="comment">//2. 删除</span></span><br><span class="line">  treeMap.remove(<span class="keyword">new</span> Person(<span class="string">"bbb"</span>, <span class="number">21</span>));</span><br><span class="line">  System.out.println(<span class="string">"删除之后:"</span> + treeMap.toString());</span><br><span class="line">  <span class="comment">//3. 遍历</span></span><br><span class="line">  <span class="comment">//3.1 keySet</span></span><br><span class="line">  Set&lt;Person&gt; keySets = treeMap.keySet();</span><br><span class="line">  <span class="keyword">for</span> (Person keySet : keySets) &#123;</span><br><span class="line">    System.out.print(keySet + <span class="string">"=="</span> + treeMap.get(keySet) + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">  <span class="comment">//3.2 entrySet</span></span><br><span class="line">  Set&lt;Map.Entry&lt;Person, String&gt;&gt; entries = treeMap.entrySet();</span><br><span class="line">  <span class="keyword">for</span> (Map.Entry&lt;Person, String&gt; entrySet : entries) &#123;</span><br><span class="line">    System.out.print(entrySet.getKey() + <span class="string">"=="</span> + entrySet.getValue() + <span class="string">" "</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://replica.me/2020/07/30/异常/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReplicaSensei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/head01.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Valley of End">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/30/异常/" itemprop="url">异常</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-30T17:51:18+08:00">
                2020-07-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h1><h2 id="异常的概念："><a href="#异常的概念：" class="headerlink" title="异常的概念："></a>异常的概念：</h2><ul>
<li>程序在运行过程中出现的特殊情况。</li>
</ul>
<h2 id="异常的分类："><a href="#异常的分类：" class="headerlink" title="异常的分类："></a>异常的分类：</h2><ul>
<li>RuntimeException：运行时异常，可处理可不处理。</li>
<li>【CheckedException】：检查时异常，必须处理。</li>
</ul>
<h2 id="异常的产生："><a href="#异常的产生：" class="headerlink" title="异常的产生："></a>异常的产生：</h2><ul>
<li>throw new 异常类型(“实际参数”)；</li>
<li>相当于遇到return语句，导致程序因异常而终止。</li>
</ul>
<h2 id="异常的传递："><a href="#异常的传递：" class="headerlink" title="异常的传递："></a>异常的传递：</h2><ul>
<li>按照方法的调用链反向传递，如始终没有处理异常，最终会由JVM进行默认异常处理(打印堆栈跟踪信息)。</li>
</ul>
<h2 id="异常的处理："><a href="#异常的处理：" class="headerlink" title="异常的处理："></a>异常的处理：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;</span><br><span class="line">  <span class="comment">//TODO</span></span><br><span class="line">&#125; <span class="keyword">catch</span> &#123;</span><br><span class="line">  <span class="comment">//TODO</span></span><br><span class="line">&#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">  <span class="comment">//TODO</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="带有异常声明的方法重写："><a href="#带有异常声明的方法重写：" class="headerlink" title="带有异常声明的方法重写："></a>带有异常声明的方法重写：</h2><ul>
<li>子类中的方法，不能抛出比父类更多、更宽的检查时异常。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://replica.me/2020/07/30/包装类/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReplicaSensei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/head01.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Valley of End">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/30/包装类/" itemprop="url">包装类</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-30T14:14:34+08:00">
                2020-07-30
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="包装类"><a href="#包装类" class="headerlink" title="包装类"></a>包装类</h1><h2 id="Integer类"><a href="#Integer类" class="headerlink" title="Integer类"></a>Integer类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestInteger</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//使用Integer创建对象</span></span><br><span class="line">        Integer integer1 = <span class="keyword">new</span> Integer(<span class="number">100</span>);</span><br><span class="line">        Integer integer2 = <span class="keyword">new</span> Integer(<span class="number">200</span>);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"=========手动装箱和拆箱========="</span>);</span><br><span class="line">        <span class="comment">//装箱:把基本类型转换成包装类类型的过程</span></span><br><span class="line">        <span class="keyword">int</span> num1 = <span class="number">20</span>;</span><br><span class="line">        Integer integer3 = <span class="keyword">new</span> Integer(num1);</span><br><span class="line">        System.out.println(num1 == integer3);   <span class="comment">//num1 == integer3.intValue()</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//拆箱:把包装类类型转换成基本类型的过程</span></span><br><span class="line">        <span class="keyword">int</span> num2 = integer3.intValue();</span><br><span class="line">        System.out.println(num2);</span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"=========自动装箱和拆箱========="</span>);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//自动装箱</span></span><br><span class="line">        <span class="keyword">int</span> age = <span class="number">30</span>;</span><br><span class="line">        Integer integer4 = age;</span><br><span class="line">        <span class="comment">//Integer integer4 =Integer.valueOf(age);</span></span><br><span class="line">        System.out.println(integer4);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//自动拆箱</span></span><br><span class="line">        <span class="keyword">int</span> age2 = integer4;</span><br><span class="line">        System.out.println(age2);</span><br><span class="line">        <span class="comment">//int age2 = integer4.intValue();</span></span><br><span class="line"></span><br><span class="line">        System.out.println(<span class="string">"============面试题============"</span>);</span><br><span class="line">        Integer integer6 = <span class="keyword">new</span> Integer(<span class="number">100</span>);    <span class="comment">//new 堆中开辟空间</span></span><br><span class="line">        Integer integer5 = <span class="keyword">new</span> Integer(<span class="number">100</span>);    <span class="comment">//new 堆中开辟空间</span></span><br><span class="line">        System.out.println(integer5 == integer6);   <span class="comment">//false 地址不同</span></span><br><span class="line"></span><br><span class="line">        Integer integer7 = <span class="number">100</span>; <span class="comment">// Integer.valueOf(100)</span></span><br><span class="line">        Integer integer8 = <span class="number">100</span>; <span class="comment">// Integer.valueOf(100)</span></span><br><span class="line">        System.out.println(integer7 == integer8);   <span class="comment">//true 同一缓冲区</span></span><br><span class="line"></span><br><span class="line">        Integer integer9 = <span class="number">200</span>; <span class="comment">//同一缓冲区取值范围-128到127</span></span><br><span class="line">        Integer integer10 = <span class="number">200</span>;</span><br><span class="line">        System.out.println(integer9 == integer10);  <span class="comment">//false</span></span><br><span class="line">      </span><br><span class="line">        System.out.println(<span class="string">"======基本类型和字符串之间的转换======"</span>);</span><br><span class="line">        <span class="keyword">int</span> n1 = <span class="number">500</span>;</span><br><span class="line">        String s1 = n1+<span class="string">""</span>;</span><br><span class="line">        String s2 = String.valueOf(n1);</span><br><span class="line">        String s3 = Integer.toString(n1);</span><br><span class="line">        System.out.println(s1);</span><br><span class="line">        System.out.println(s2);</span><br><span class="line">        System.out.println(s3);</span><br><span class="line">        System.out.println(<span class="string">"======字符串和基本类型之间的转换======"</span>);</span><br><span class="line">        String s4 = <span class="string">"100"</span>;</span><br><span class="line">        <span class="keyword">int</span> n2 = Integer.parseInt(s4);</span><br><span class="line">        <span class="keyword">int</span> n3 = Integer.parseInt(s4, <span class="number">2</span>);</span><br><span class="line">        System.out.println(n2);</span><br><span class="line">        System.out.println(n3);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//特殊boolean</span></span><br><span class="line">        <span class="keyword">boolean</span> b = Boolean.parseBoolean(<span class="string">"ssss"</span>);</span><br><span class="line">        System.out.println(b);  <span class="comment">//只要不是true，全部转为false</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="String类"><a href="#String类" class="headerlink" title="String类"></a>String类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestString</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//字符串使用方式1，直接字面量赋值</span></span><br><span class="line">        String name1 = <span class="string">"zhangsan"</span>;   <span class="comment">//字符串常量存在方法区中的常量池中</span></span><br><span class="line">        name1 = <span class="string">"lisi"</span>;  <span class="comment">//在常量池中再创建一个对象lisi,zhangsan变为垃圾</span></span><br><span class="line">        System.out.println(name1);</span><br><span class="line">        <span class="comment">//字符串使用方式2，使用构造方法</span></span><br><span class="line">        String name2 = <span class="keyword">new</span> String(<span class="string">"wangwu"</span>);    <span class="comment">//指向堆中的value，value指向常量池中的wangwu</span></span><br><span class="line">        String name3 = <span class="string">"wangwu"</span>;    <span class="comment">//直接指向常量池中的wangwu</span></span><br><span class="line">        System.out.println(name2);</span><br><span class="line">        System.out.println(name3);</span><br><span class="line">        System.out.println(name2 == name3); <span class="comment">//false 地址不同</span></span><br><span class="line">        System.out.println(name2.equals(name3));    <span class="comment">//true 字符串字面量相同</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="常用方法："><a href="#常用方法：" class="headerlink" title="常用方法："></a>常用方法：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestString2</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"------------字符串方法的使用 1------------------"</span>);</span><br><span class="line">        <span class="comment">//字符串方法的使用</span></span><br><span class="line">        <span class="comment">//1、length();返回字符串的长度</span></span><br><span class="line">        <span class="comment">//2、charAt(int index);返回某个位置的字符</span></span><br><span class="line">        <span class="comment">//3、contains(String str);判断是否包含某个子字符串</span></span><br><span class="line">        String content=<span class="string">"java是世界上最好的java编程语言,java真香"</span>;</span><br><span class="line">        System.out.println(content.length());</span><br><span class="line">        System.out.println(content.charAt(content.length()-<span class="number">1</span>));</span><br><span class="line">        System.out.println(content.contains(<span class="string">"java"</span>));</span><br><span class="line">        System.out.println(content.contains(<span class="string">"php"</span>));</span><br><span class="line">        System.out.println(<span class="string">"------------字符串方法的使用 2------------------"</span>);</span><br><span class="line">        <span class="comment">//字符串方法的使用</span></span><br><span class="line">        <span class="comment">//4、toCharArray();返回字符串对应的数组</span></span><br><span class="line">        <span class="comment">//5、indexOf();返回子字符串首次出现的位置</span></span><br><span class="line">        <span class="comment">//6、lastIndexOf();返回字符串最后一次出现的位置</span></span><br><span class="line">        System.out.println(Arrays.toString(content.toCharArray()));</span><br><span class="line">        System.out.println(content.indexOf(<span class="string">"java"</span>));</span><br><span class="line">        System.out.println(content.indexOf(<span class="string">"java"</span>, <span class="number">4</span>));</span><br><span class="line">        System.out.println(content.lastIndexOf(<span class="string">"java"</span>));</span><br><span class="line">        System.out.println(<span class="string">"------------字符串方法的使用3------------------"</span>);</span><br><span class="line">        <span class="comment">//7、trim();去掉字符串前后的空格</span></span><br><span class="line">        <span class="comment">//8、toUpperCase();//把小写转成大写 toLowerCase();把大写转成小写</span></span><br><span class="line">        <span class="comment">//9、endWith(str);判断是否已str结尾,startWith(str);判断是否已str开头</span></span><br><span class="line">        String content2=<span class="string">"   hello World   "</span>;</span><br><span class="line">        System.out.println(content2.trim());</span><br><span class="line">        System.out.println(content2.toUpperCase());</span><br><span class="line">        System.out.println(content2.toLowerCase());</span><br><span class="line">        String filename=<span class="string">"hello.java"</span>;</span><br><span class="line">        System.out.println(filename.endsWith(<span class="string">".java"</span>));</span><br><span class="line">        System.out.println(filename.startsWith(<span class="string">"hello"</span>));</span><br><span class="line">        System.out.println(<span class="string">"------------字符串方法的使用4------------------"</span>);</span><br><span class="line">        <span class="comment">//10、replace(char old,char new); 用新的字符或字符串替换旧的字符或字符串</span></span><br><span class="line">        <span class="comment">//11、split();对字符串进行拆分</span></span><br><span class="line">        System.out.println(content.replace(<span class="string">"java"</span>, <span class="string">"php"</span>));</span><br><span class="line">        String say=<span class="string">"java is the best   programing language,java xiang"</span>;</span><br><span class="line">        String[] arr=say.split(<span class="string">"[ ,]+"</span>);</span><br><span class="line">        System.out.println(arr.length);</span><br><span class="line">        <span class="keyword">for</span> (String string : arr) &#123;</span><br><span class="line">            System.out.println(string);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//补充两个方法equals 、compareTo();比较大小</span></span><br><span class="line">        System.out.println(<span class="string">"---------补充---------"</span>);</span><br><span class="line">        String s1=<span class="string">"hello"</span>;</span><br><span class="line">        String s2=<span class="string">"HELLO"</span>;</span><br><span class="line">        System.out.println(s1.equalsIgnoreCase(s2));</span><br><span class="line">        String s3=<span class="string">"abc"</span>;<span class="comment">//97</span></span><br><span class="line">        String s4=<span class="string">"ayzawe"</span>;<span class="comment">//120</span></span><br><span class="line">        System.out.println(s3.compareTo(s4));</span><br><span class="line">        String s5=<span class="string">"abc"</span>;</span><br><span class="line">        String s6=<span class="string">"abc"</span>;</span><br><span class="line">        System.out.println(s5.compareTo(s6));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>打印结果:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">------------字符串方法的使用 1------------------</span><br><span class="line">26</span><br><span class="line">香</span><br><span class="line">true</span><br><span class="line">false</span><br><span class="line">------------字符串方法的使用 2------------------</span><br><span class="line">[j, a, v, a, 是, 世, 界, 上, 最, 好, 的, j, a, v, a, 编, 程, 语, 言, ,, j, a, v, a, 真, 香]</span><br><span class="line">0</span><br><span class="line">11</span><br><span class="line">20</span><br><span class="line">------------字符串方法的使用3------------------</span><br><span class="line">hello World</span><br><span class="line">   HELLO WORLD   </span><br><span class="line">   hello world   </span><br><span class="line">true</span><br><span class="line">true</span><br><span class="line">------------字符串方法的使用4------------------</span><br><span class="line">php是世界上最好的php编程语言,php真香</span><br><span class="line">8</span><br><span class="line">java</span><br><span class="line">is</span><br><span class="line">the</span><br><span class="line">best</span><br><span class="line">programing</span><br><span class="line">language</span><br><span class="line">java</span><br><span class="line">xiang</span><br><span class="line">---------补充---------</span><br><span class="line">true</span><br><span class="line">-23</span><br><span class="line">0</span><br></pre></td></tr></table></figure>

<p>练习:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//拆分单词</span></span><br><span class="line">  String str = <span class="string">"this is a text"</span>;</span><br><span class="line">  String[] arr = str.split(<span class="string">" "</span>);</span><br><span class="line">  <span class="keyword">for</span> (String s : arr) &#123;</span><br><span class="line">    System.out.println(s);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">//将text替换为practice</span></span><br><span class="line">  String str2 = str.replace(<span class="string">"text"</span>, <span class="string">"practice"</span>);</span><br><span class="line">  System.out.println(str2);</span><br><span class="line">  <span class="comment">//在text前加easy</span></span><br><span class="line">  String str3 = str.replace(<span class="string">"text"</span>, <span class="string">"easy text"</span>);</span><br><span class="line">  System.out.println(str3);</span><br><span class="line">  <span class="comment">//单词首字母大写</span></span><br><span class="line">  String str4 = <span class="keyword">new</span> String();</span><br><span class="line">  <span class="keyword">for</span> (String s : arr) &#123;</span><br><span class="line">    <span class="keyword">char</span> upperfirst = Character.toUpperCase(s.charAt(<span class="number">0</span>));</span><br><span class="line">    String word = upperfirst + s.substring(<span class="number">1</span>);</span><br><span class="line">    str4 += word + <span class="string">" "</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  System.out.println(str4.trim());</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="可变字符串："><a href="#可变字符串：" class="headerlink" title="可变字符串："></a>可变字符串：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  StringBuffer sb = <span class="keyword">new</span> StringBuffer();   <span class="comment">//线程安全，效率低</span></span><br><span class="line">  <span class="comment">//StringBuilder sb = new StringBuilder();   //线程不安全，效率快</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//append();追加数据</span></span><br><span class="line">  sb.append(<span class="string">"我爱java"</span>);</span><br><span class="line">  System.out.println(sb); <span class="comment">//我爱java</span></span><br><span class="line">  sb.append(<span class="string">",java是世界上最好的语言"</span>);</span><br><span class="line">  System.out.println(sb); <span class="comment">//我爱java,java是世界上最好的语言</span></span><br><span class="line">  System.out.println(sb.toString());  <span class="comment">//我爱java,java是世界上最好的语言</span></span><br><span class="line">  <span class="comment">//insert();插入数据</span></span><br><span class="line">  sb.insert(<span class="number">0</span>, <span class="string">"我爱上海,"</span>);</span><br><span class="line">  System.out.println(sb.toString());  <span class="comment">//我爱上海,我爱java,java是世界上最好的语言</span></span><br><span class="line">  <span class="comment">//replace();替换数据</span></span><br><span class="line">  sb.replace(<span class="number">2</span>, <span class="number">4</span>, <span class="string">"北京"</span>);</span><br><span class="line">  System.out.println(sb.toString());  <span class="comment">//我爱北京,我爱java,java是世界上最好的语言</span></span><br><span class="line">  <span class="comment">//reverse();反转</span></span><br><span class="line">  sb.reverse();</span><br><span class="line">  System.out.println(sb.toString());  <span class="comment">//言语的好最上界世是avaj,avaj爱我,京北爱我</span></span><br><span class="line">  <span class="comment">//delete();删除</span></span><br><span class="line">  sb.reverse();</span><br><span class="line">  sb.delete(<span class="number">0</span>, <span class="number">5</span>);</span><br><span class="line">  System.out.println(sb.toString());  <span class="comment">//我爱java,java是世界上最好的语言</span></span><br><span class="line">  <span class="comment">//清空数据</span></span><br><span class="line">  sb.delete(<span class="number">0</span>, sb.length());</span><br><span class="line">  System.out.println(sb.toString());  <span class="comment">//</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//匹配手机号</span></span><br><span class="line">  System.out.println(<span class="string">"----------------匹配---------------"</span>);</span><br><span class="line">  String reg = <span class="string">"1[3456789]\\d&#123;9&#125;"</span>;</span><br><span class="line">  <span class="comment">//创建字符串</span></span><br><span class="line">  String phone = <span class="string">"13287595909"</span>;</span><br><span class="line">  <span class="keyword">boolean</span> b = phone.matches(reg);</span><br><span class="line">  System.out.println(b);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//匹配qq邮箱 qq号 6-11位  @  qq/QQ  .com</span></span><br><span class="line">  String reg2 = <span class="string">"[1-9]\\d&#123;5,10&#125;@[qQ]&#123;2&#125;\\.com$"</span>;</span><br><span class="line">  String qqEmail = <span class="string">"2827727590@qq.com"</span>;</span><br><span class="line">  <span class="keyword">boolean</span> b1 = qqEmail.matches(reg2);</span><br><span class="line">  System.out.println(b1);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//拆分</span></span><br><span class="line">  System.out.println(<span class="string">"----------------拆分---------------"</span>);</span><br><span class="line">  String word = <span class="string">"Hello,I am replicasensei,How    are you!"</span>;</span><br><span class="line">  String[] arr = word.split(<span class="string">"[, !]+"</span>);</span><br><span class="line">  <span class="keyword">for</span> (String s : arr) &#123;</span><br><span class="line">    System.out.println(s);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//Pattern: 正则表达式的编译形式</span></span><br><span class="line">  System.out.println(<span class="string">"--------------Pattern-------------"</span>);</span><br><span class="line">  Pattern pattern = Pattern.compile(<span class="string">"[1-9]\\d&#123;5,10&#125;@[qQ]&#123;2&#125;\\.com$"</span>);</span><br><span class="line">  Matcher matcher = pattern.matcher(<span class="string">"2827727590@qq.com"</span>);</span><br><span class="line">  <span class="comment">//调用matchers()方法</span></span><br><span class="line">  <span class="keyword">boolean</span> b2 = matcher.matches();</span><br><span class="line">  System.out.println(b2);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//获取</span></span><br><span class="line">  System.out.println(<span class="string">"----------------获取---------------"</span>);</span><br><span class="line">  String word1 = <span class="string">"我爱java,java是世界上最好的语言,java真香!"</span>;</span><br><span class="line"></span><br><span class="line">  Pattern pattern1 = Pattern.compile(<span class="string">"[Jj]ava"</span>);</span><br><span class="line">  Matcher matcher1 = pattern1.matcher(word1);</span><br><span class="line">  <span class="keyword">while</span> (matcher1.find()) &#123;</span><br><span class="line">    <span class="comment">//group() 获取找到的数据</span></span><br><span class="line">    System.out.println(matcher1.group());</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//替换</span></span><br><span class="line">  System.out.println(<span class="string">"----------------替换---------------"</span>);</span><br><span class="line">  String word2 = word1.replaceAll(<span class="string">"[Jj]ava"</span>, <span class="string">"php"</span>);</span><br><span class="line">  System.out.println(word2);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//扩展叠词处理</span></span><br><span class="line">  System.out.println(<span class="string">"------------扩展叠词处理-----------"</span>);</span><br><span class="line">  String word3 = <span class="string">"我我我我我....喜喜喜欢....JJJJJJava...."</span>;</span><br><span class="line">  String word4 = word3.replaceAll(<span class="string">"[.]"</span>, <span class="string">""</span>);</span><br><span class="line">  String word5 = word4.replaceAll(<span class="string">"(.)\\1+"</span>, <span class="string">"$1"</span>);</span><br><span class="line">  System.out.println(word3);</span><br><span class="line">  System.out.println(word4);</span><br><span class="line">  System.out.println(word5);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="BigDecimal"><a href="#BigDecimal" class="headerlink" title="BigDecimal"></a>BigDecimal</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">double</span> d1=<span class="number">1.0</span>;</span><br><span class="line">  <span class="keyword">double</span> d2=<span class="number">0.9</span>;</span><br><span class="line">  System.out.println(d1-d2);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//面试题</span></span><br><span class="line">  <span class="keyword">double</span> result=(<span class="number">1.4</span>-<span class="number">0.5</span>)/<span class="number">0.9</span>;</span><br><span class="line">  System.out.println(result);</span><br><span class="line">  <span class="comment">//BigDecimal,大的浮点数精确计算</span></span><br><span class="line">  BigDecimal bd1=<span class="keyword">new</span> BigDecimal(<span class="string">"1.0"</span>);</span><br><span class="line">  BigDecimal bd2=<span class="keyword">new</span> BigDecimal(<span class="string">"0.9"</span>);</span><br><span class="line">  <span class="comment">//减法</span></span><br><span class="line">  BigDecimal r1=bd1.subtract(bd2);</span><br><span class="line">  System.out.println(r1);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//加法</span></span><br><span class="line">  BigDecimal r2=bd1.add(bd2);</span><br><span class="line">  System.out.println(r2);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//乘法</span></span><br><span class="line">  BigDecimal r3=bd1.multiply(bd2);</span><br><span class="line">  System.out.println(r3);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//除法</span></span><br><span class="line">  BigDecimal r4=<span class="keyword">new</span> BigDecimal(<span class="string">"1.4"</span>)</span><br><span class="line">    .subtract(<span class="keyword">new</span> BigDecimal(<span class="string">"0.5"</span>))</span><br><span class="line">    .divide(<span class="keyword">new</span> BigDecimal(<span class="string">"0.9"</span>));</span><br><span class="line">  System.out.println(r4);</span><br><span class="line"></span><br><span class="line">  BigDecimal r5=<span class="keyword">new</span> BigDecimal(<span class="string">"20"</span>).divide(<span class="keyword">new</span> BigDecimal(<span class="string">"3"</span>),<span class="number">2</span>,BigDecimal.ROUND_HALF_UP);</span><br><span class="line">  System.out.println(r5);</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="时间类型"><a href="#时间类型" class="headerlink" title="时间类型"></a>时间类型</h2><h3 id="Date类"><a href="#Date类" class="headerlink" title="Date类"></a>Date类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//1创建Date对象</span></span><br><span class="line">  <span class="comment">//今天</span></span><br><span class="line">  Date date1=<span class="keyword">new</span> Date();</span><br><span class="line">  System.out.println(date1.toString());</span><br><span class="line">  System.out.println(date1.toLocaleString());</span><br><span class="line">  <span class="comment">//昨天</span></span><br><span class="line">  Date date2=<span class="keyword">new</span> Date(date1.getTime()-(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">1000</span>));</span><br><span class="line">  System.out.println(date2.toLocaleString());</span><br><span class="line">  <span class="comment">//2方法after before</span></span><br><span class="line">  <span class="keyword">boolean</span> b1=date1.after(date2);</span><br><span class="line">  System.out.println(b1);</span><br><span class="line">  <span class="keyword">boolean</span> b2=date1.before(date2);</span><br><span class="line">  System.out.println(b2);</span><br><span class="line"></span><br><span class="line">  <span class="comment">//比较 compareTo();</span></span><br><span class="line">  <span class="keyword">int</span> d=date2.compareTo(date1);</span><br><span class="line">  System.out.println(d);</span><br><span class="line">  <span class="comment">//比较是否相等 equals()</span></span><br><span class="line">  <span class="keyword">boolean</span> b3=date1.equals(date2);</span><br><span class="line">  System.out.println(b3);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="Calendar类"><a href="#Calendar类" class="headerlink" title="Calendar类"></a>Calendar类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//1创建Calendar对象</span></span><br><span class="line">  Calendar calendar=Calendar.getInstance();</span><br><span class="line">  System.out.println(calendar.getTime().toLocaleString());</span><br><span class="line">  System.out.println(calendar.getTimeInMillis());</span><br><span class="line">  <span class="comment">//2获取时间信息</span></span><br><span class="line">  <span class="comment">//获取年</span></span><br><span class="line">  <span class="keyword">int</span> year=calendar.get(Calendar.YEAR);</span><br><span class="line">  <span class="comment">//月 从0-11</span></span><br><span class="line">  <span class="keyword">int</span> month=calendar.get(Calendar.MONTH);</span><br><span class="line">  <span class="comment">//日</span></span><br><span class="line">  <span class="keyword">int</span> day=calendar.get(Calendar.DAY_OF_MONTH);<span class="comment">//Date</span></span><br><span class="line">  <span class="comment">//小时</span></span><br><span class="line">  <span class="keyword">int</span> hour=calendar.get(Calendar.HOUR_OF_DAY); <span class="comment">//HOUR12小时 HOUR_OF_DAY24小时</span></span><br><span class="line">  <span class="comment">//分钟</span></span><br><span class="line">  <span class="keyword">int</span> minute=calendar.get(Calendar.MINUTE);</span><br><span class="line">  <span class="comment">//秒</span></span><br><span class="line">  <span class="keyword">int</span> second=calendar.get(Calendar.SECOND);</span><br><span class="line">  System.out.println(year+<span class="string">"年"</span>+(month+<span class="number">1</span>)+<span class="string">"月"</span>+day+<span class="string">"日"</span>+hour+<span class="string">":"</span>+minute+<span class="string">":"</span>+second);</span><br><span class="line">  <span class="comment">//3修改时间</span></span><br><span class="line">  Calendar calendar2=Calendar.getInstance();</span><br><span class="line">  calendar2.set(Calendar.DAY_OF_MONTH, <span class="number">5</span>);</span><br><span class="line">  System.out.println(calendar2.getTime().toLocaleString());</span><br><span class="line"></span><br><span class="line">  <span class="comment">//4add方法修改时间</span></span><br><span class="line">  calendar2.add(Calendar.HOUR, -<span class="number">1</span>);</span><br><span class="line">  System.out.println(calendar2.getTime().toLocaleString());</span><br><span class="line"></span><br><span class="line">  <span class="comment">//5补充方法</span></span><br><span class="line">  calendar2.add(Calendar.MONTH, <span class="number">1</span>);</span><br><span class="line">  <span class="keyword">int</span> max=calendar2.getActualMaximum(Calendar.DAY_OF_MONTH);</span><br><span class="line">  <span class="keyword">int</span> min=calendar2.getActualMinimum(Calendar.DAY_OF_MONTH);</span><br><span class="line">  System.out.println(max);</span><br><span class="line">  System.out.println(min);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="SimpleDateFormat类"><a href="#SimpleDateFormat类" class="headerlink" title="SimpleDateFormat类"></a>SimpleDateFormat类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception</span>&#123;</span><br><span class="line">  <span class="comment">//1创建SimpleDateFormat对象  y 年 M 月</span></span><br><span class="line">  <span class="comment">//SimpleDateFormat sdf=new SimpleDateFormat("yyyy/MM/dd HH-mm-ss");</span></span><br><span class="line">  SimpleDateFormat sdf=<span class="keyword">new</span> SimpleDateFormat(<span class="string">"yyyy/MM/dd"</span>);</span><br><span class="line">  <span class="comment">//2创建Date</span></span><br><span class="line">  Date date=<span class="keyword">new</span> Date();</span><br><span class="line">  <span class="comment">//格式化date(把日期转成字符串)</span></span><br><span class="line">  String str=sdf.format(date);</span><br><span class="line">  System.out.println(str);</span><br><span class="line">  <span class="comment">//解析 （把字符串转成日期）</span></span><br><span class="line">  Date date2=sdf.parse(<span class="string">"1990/05/01"</span>);</span><br><span class="line">  System.out.println(date2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Math类"><a href="#Math类" class="headerlink" title="Math类"></a>Math类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  System.out.println(Math.abs(<span class="number">10</span>));</span><br><span class="line">  System.out.println(Math.abs(-<span class="number">10</span>));</span><br><span class="line">  System.out.println(Math.ceil(<span class="number">3.5</span>)); <span class="comment">//返回大于或等于这个数字的最小整数</span></span><br><span class="line">  System.out.println(Math.floor(<span class="number">2.7</span>));    <span class="comment">//返回小于或等于这个数字的最大整数</span></span><br><span class="line">  System.out.println(Math.pow(<span class="number">2</span>, <span class="number">10</span>));</span><br><span class="line">  System.out.println(Math.round(<span class="number">3.1415926</span>*<span class="number">100</span>/<span class="number">100.0</span>));    <span class="comment">//返回四舍五入最接近的数字</span></span><br><span class="line">  System.out.println(Math.random());  <span class="comment">//返回[0-1)之间的小数</span></span><br><span class="line">  System.out.println((<span class="keyword">int</span>)Math.random()*<span class="number">10</span>);  <span class="comment">//返回0到9之间的数字</span></span><br><span class="line">  System.out.println(Math.sqrt(<span class="number">50</span>));  <span class="comment">//返回平方根</span></span><br><span class="line">  System.out.println(Math.cbrt(<span class="number">27</span>));  <span class="comment">//返回立方根</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Random类"><a href="#Random类" class="headerlink" title="Random类"></a>Random类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  Random random = <span class="keyword">new</span> Random();</span><br><span class="line">  System.out.println(random.nextInt());</span><br><span class="line">  System.out.println(random.nextDouble());</span><br><span class="line">  System.out.println(random.nextInt(<span class="number">100</span>));    <span class="comment">//0-99</span></span><br><span class="line"></span><br><span class="line">  Random random1 = <span class="keyword">new</span> Random(<span class="number">1000</span>);</span><br><span class="line">  System.out.println(random1.nextInt());</span><br><span class="line">  Random random2 = <span class="keyword">new</span> Random(<span class="number">1000</span>);</span><br><span class="line">  System.out.println(random2.nextInt());</span><br><span class="line">  System.out.println(random1==random2);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="System类"><a href="#System类" class="headerlink" title="System类"></a>System类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">  <span class="comment">//System类的使用</span></span><br><span class="line">  <span class="comment">//arraycopy() 复制数组</span></span><br><span class="line">  <span class="keyword">int</span>[] nums = &#123;<span class="number">8</span>, <span class="number">20</span>, <span class="number">36</span>, <span class="number">8</span>, <span class="number">100</span>&#125;;</span><br><span class="line">  <span class="keyword">int</span>[] nums2 = <span class="keyword">new</span> <span class="keyword">int</span> [<span class="number">10</span>];</span><br><span class="line">  System.arraycopy(nums, <span class="number">0</span>, nums2, <span class="number">0</span>, nums.length);</span><br><span class="line">  System.out.println(Arrays.toString(nums2));</span><br><span class="line">  <span class="comment">//currentTimeMillis() 获取从1970年到现在的毫秒数</span></span><br><span class="line">  System.out.println(System.currentTimeMillis());</span><br><span class="line">  <span class="keyword">long</span> start = System.currentTimeMillis();</span><br><span class="line">  <span class="keyword">for</span> (<span class="keyword">int</span> i = -<span class="number">999999</span>; i &lt; <span class="number">999999</span>; i++) &#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> j = -<span class="number">999999</span>; j &lt; <span class="number">999999</span>; j++) &#123;</span><br><span class="line">      <span class="keyword">int</span> result = i + j;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">long</span> end = System.currentTimeMillis();</span><br><span class="line">  <span class="keyword">long</span> end2 = System.nanoTime();</span><br><span class="line">  System.out.println(<span class="string">"用时:"</span> + (end2 - start));</span><br><span class="line">  <span class="comment">//退出jvm</span></span><br><span class="line">  System.exit(<span class="number">0</span>);</span><br><span class="line">  System.out.println(<span class="string">"程序结束了"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Runtime类"><a href="#Runtime类" class="headerlink" title="Runtime类"></a>Runtime类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">  <span class="comment">//Runtime类:运行时类，只能通过getRuntime()获取实例</span></span><br><span class="line">  Runtime runtime = Runtime.getRuntime();</span><br><span class="line">  <span class="comment">//1 exec(); 在单独进程中执行命令</span></span><br><span class="line">  <span class="comment">//Process process = runtime.exec("notepad");</span></span><br><span class="line">  Thread.sleep(<span class="number">5000</span>);</span><br><span class="line">  <span class="comment">//关闭</span></span><br><span class="line">  <span class="comment">//process.destroy();</span></span><br><span class="line">  <span class="comment">//2.退出jvm</span></span><br><span class="line">  <span class="comment">//runtime.exit(0);</span></span><br><span class="line">  <span class="comment">//3.gc 执行垃圾回收器</span></span><br><span class="line">  <span class="comment">//runtime.gc();</span></span><br><span class="line">  <span class="comment">//4.获取内存</span></span><br><span class="line">  System.out.println(<span class="string">"总内存"</span> + runtime.totalMemory()/<span class="number">1024</span>/<span class="number">1024</span>);</span><br><span class="line">  System.out.println(<span class="string">"空闲内存"</span> + runtime.freeMemory()/<span class="number">1024</span>/<span class="number">1024</span>);</span><br><span class="line">  System.out.println(<span class="string">"程序结束了"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="修改jvm运行内存："><a href="#修改jvm运行内存：" class="headerlink" title="修改jvm运行内存："></a>修改jvm运行内存：</h3><p><b>在VM Option中设置：</b></p>
<ul>
<li>修改堆初始内存大小: -Xms300m</li>
<li>修改堆最大内存大小: -Xmx4000m</li>
<li>修改栈空间大小: -Xss2m (jdk1.5之前256k，jdk1.5之后1m)</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://replica.me/2020/07/29/常用类/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReplicaSensei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/head01.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Valley of End">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/29/常用类/" itemprop="url">常用类</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-29T10:14:34+08:00">
                2020-07-29
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="常用类"><a href="#常用类" class="headerlink" title="常用类"></a>常用类</h1><h2 id="成员内部类"><a href="#成员内部类" class="headerlink" title="成员内部类"></a>成员内部类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Outer</span> </span>&#123;</span><br><span class="line">    <span class="comment">//实例属性</span></span><br><span class="line">    <span class="keyword">private</span> String name = <span class="string">"xxx"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//实例方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(name);	<span class="comment">//xxx</span></span><br><span class="line">        System.out.println(Inner.age);	<span class="comment">//10</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//成员内部类</span></span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Inner</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> <span class="keyword">int</span> age = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">private</span> String name = <span class="string">"aaa"</span>;</span><br><span class="line">        <span class="keyword">private</span> String email = <span class="string">"....@qq.com"</span>;</span><br><span class="line">        <span class="keyword">private</span> String gender = <span class="string">"男"</span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(name);	<span class="comment">//aaa</span></span><br><span class="line">            System.out.println(Outer.<span class="keyword">this</span>.name);	<span class="comment">//xxx</span></span><br><span class="line">            System.out.println(age);    <span class="comment">//10</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> myClass.Outer.Inner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestOuter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Outer outer = <span class="keyword">new</span> Outer();</span><br><span class="line">        Inner inner = outer.new Inner();</span><br><span class="line">        inner.show();	<span class="comment">//aaa xxx 10</span></span><br><span class="line">      	out.show();	<span class="comment">//xxx 10</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="成员内部类特点："><a href="#成员内部类特点：" class="headerlink" title="成员内部类特点："></a>成员内部类特点：</h3><ul>
<li>成员内部类可以使用任意访问修饰符。</li>
<li>成员内部类可以直接访问外部类的属性和方法。</li>
<li>成员内部类中属性和外部类的属性同名时，使用外部类名.this访问外部类属性。</li>
<li>成员内部类不能包含静态成员，但可以包含静态常量(static final)。</li>
</ul>
<h2 id="静态内部类"><a href="#静态内部类" class="headerlink" title="静态内部类"></a>静态内部类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Outer</span> </span>&#123;</span><br><span class="line">    <span class="comment">//实例属性</span></span><br><span class="line">    <span class="keyword">private</span> String name = <span class="string">"xxx"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//实例方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(name);	<span class="comment">//xxx</span></span><br><span class="line">        System.out.println(Inner.age);	<span class="comment">//10</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//静态内部类</span></span><br><span class="line">    <span class="keyword">static</span> <span class="class"><span class="keyword">class</span> <span class="title">Inner</span> </span>&#123;</span><br><span class="line">        <span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">int</span> age = <span class="number">10</span>;</span><br><span class="line">        <span class="keyword">private</span> String name = <span class="string">"aaa"</span>;</span><br><span class="line">        <span class="keyword">private</span> String email = <span class="string">"....@qq.com"</span>;</span><br><span class="line">        <span class="keyword">private</span> String gender = <span class="string">"男"</span>;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">            System.out.println(name);	<span class="comment">//aaa</span></span><br><span class="line">            System.out.println(age);    <span class="comment">//10</span></span><br><span class="line">            Outer outer = <span class="keyword">new</span> Outer();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> myClass.Outer.Inner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestOuter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Outer outer = <span class="keyword">new</span> Outer();</span><br><span class="line">        Inner inner = <span class="keyword">new</span> Inner();</span><br><span class="line">        inner.print();	<span class="comment">//aaa 10</span></span><br><span class="line">        outer.show();	<span class="comment">//xxx 10</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="静态内部类特点："><a href="#静态内部类特点：" class="headerlink" title="静态内部类特点："></a>静态内部类特点：</h3><ul>
<li>静态内部类可以使用任意访问修饰符。</li>
<li>静态内部类不能直接访问外部类的实例属性和方法，可以直接访问静态的属性和方法。</li>
<li>静态内部类可以包含静态成员。</li>
</ul>
<h2 id="局部内部类"><a href="#局部内部类" class="headerlink" title="局部内部类"></a>局部内部类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Outer</span> </span>&#123;</span><br><span class="line">    <span class="comment">//实例属性</span></span><br><span class="line">    <span class="keyword">private</span> String name = <span class="string">"xxx"</span>;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age = <span class="number">20</span>;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//实例方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">show</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="comment">//局部变量</span></span><br><span class="line">        String phone = <span class="string">"110"</span>;</span><br><span class="line">        String name = <span class="string">"1"</span>;  <span class="comment">//无法访问</span></span><br><span class="line">        System.out.println(<span class="keyword">this</span>.name);</span><br><span class="line">        <span class="comment">//局部内部类</span></span><br><span class="line">        <span class="class"><span class="keyword">class</span> <span class="title">Inner</span> </span>&#123;</span><br><span class="line">            <span class="keyword">private</span> String name = <span class="string">"aaa"</span>;</span><br><span class="line">            <span class="keyword">private</span> String email = <span class="string">"@126.com"</span>;</span><br><span class="line">            <span class="keyword">private</span> String gender = <span class="string">"男"</span>;</span><br><span class="line"></span><br><span class="line">            <span class="comment">//方法</span></span><br><span class="line">            <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">print</span><span class="params">()</span> </span>&#123;</span><br><span class="line">                System.out.println(name + phone + email);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//创建对象</span></span><br><span class="line">        Inner inner = <span class="keyword">new</span> Inner();</span><br><span class="line">        inner.print();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestOuter</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Outer outer = <span class="keyword">new</span> Outer();</span><br><span class="line">        outer.show();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="局部内部类特点："><a href="#局部内部类特点：" class="headerlink" title="局部内部类特点："></a>局部内部类特点：</h3><ul>
<li>不能使用任何访问修饰符。</li>
<li>如果局部内部类所在方法是非静态方法，可以直接访问外部类的实例属性和方法；如果局部内部类所在方法是静态方法，只能访问静态属性和方法。</li>
<li>局部内部类可以访问局部变量，但是局部变量必须是final，JDK1.8 final可以省略。（局部变量的生命周期短于对象）</li>
<li>局部内部类也不能声明静态成员，可以使用静态常量(static final)。</li>
</ul>
<h2 id="匿名内部类"><a href="#匿名内部类" class="headerlink" title="匿名内部类"></a>匿名内部类</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestUsb</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//使用匿名内部类优化(相当于创建了一个局部内部类)</span></span><br><span class="line">        Usb usb = ()-&gt; System.out.println(<span class="string">"连接电脑成功，风扇开始工作了...."</span>);</span><br><span class="line"><span class="comment">//        Usb usb=new Usb() &#123;</span></span><br><span class="line"><span class="comment">//            @Override</span></span><br><span class="line"><span class="comment">//            public void service() &#123;</span></span><br><span class="line"><span class="comment">//                System.out.println("连接电脑成功，风扇开始工作了....");</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//        &#125;;</span></span><br><span class="line">        usb.service();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Usb</span> </span>&#123;</span><br><span class="line">    <span class="comment">//服务</span></span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">service</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="匿名内部类特点："><a href="#匿名内部类特点：" class="headerlink" title="匿名内部类特点："></a>匿名内部类特点：</h3><ul>
<li>创建匿名内部类可以使用接口，抽象类，普通类，必须实现接口或抽象类中的抽象方法。</li>
<li>匿名内部类不能手动添加构造方法，不能包含静态的成员。</li>
<li>匿名内部类中一般不包含特有的方法，不能直接访问，可以通过可访问方法调用或内部对象调用。</li>
<li>匿名内部类生成的class文件名:类名$编号.class。</li>
</ul>
<h2 id="Object类"><a href="#Object类" class="headerlink" title="Object类"></a>Object类</h2><h3 id="getClass-方法、hashCode-方法、toString-方法、equals-方法："><a href="#getClass-方法、hashCode-方法、toString-方法、equals-方法：" class="headerlink" title="getClass()方法、hashCode()方法、toString()方法、equals()方法："></a>getClass()方法、hashCode()方法、toString()方法、equals()方法：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myObject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String id;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String id, String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getId</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setId</span><span class="params">(String id)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Student&#123;"</span> +</span><br><span class="line">                <span class="string">"id='"</span> + id + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", name='"</span> + name + <span class="string">'\''</span> +</span><br><span class="line">                <span class="string">", age="</span> + age +</span><br><span class="line">                <span class="string">'&#125;'</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  	<span class="comment">//重写equals()</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">equals</span><span class="params">(Object obj)</span> </span>&#123;</span><br><span class="line">        <span class="comment">//1.判断obj是否为空</span></span><br><span class="line">        <span class="keyword">if</span> (obj == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//2.比较两个对象同一个</span></span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">this</span> == obj) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//3.判断是否是Student类型</span></span><br><span class="line">        <span class="keyword">if</span> (obj <span class="keyword">instanceof</span> Student) &#123;</span><br><span class="line">            Student s = (Student) obj;</span><br><span class="line">            <span class="keyword">if</span> (<span class="keyword">this</span>.getName().equals(s.getName())</span><br><span class="line">                    &amp;&amp; <span class="keyword">this</span>.getId().equals(s.getId())</span><br><span class="line">                    &amp;&amp; <span class="keyword">this</span>.getAge() == s.getAge()) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> myObject;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestCreateObject</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Student s1 = <span class="keyword">new</span> Student(<span class="string">"s1001"</span>, <span class="string">"aa"</span>, <span class="number">20</span>);</span><br><span class="line">        Student s2 = <span class="keyword">new</span> Student(<span class="string">"s1002"</span>, <span class="string">"bb"</span>, <span class="number">20</span>);</span><br><span class="line">        System.out.println(<span class="string">"----------getClass()------------"</span>);</span><br><span class="line">        System.out.println(s1.getClass() == s2.getClass());   <span class="comment">//判断类是否为同类</span></span><br><span class="line">        System.out.println(s1.getClass().getName());    <span class="comment">//获取类的全名</span></span><br><span class="line">        System.out.println(s1.getClass().getSimpleName());  <span class="comment">//获取类的类名</span></span><br><span class="line">        System.out.println(s1.getClass().getPackage().getName());   <span class="comment">//获取类的包名</span></span><br><span class="line">        System.out.println(<span class="string">"----------hashCode()------------"</span>);</span><br><span class="line">        System.out.println(s1.hashCode());</span><br><span class="line">        System.out.println(s2.hashCode());</span><br><span class="line"></span><br><span class="line">        String name1 = <span class="string">"abc"</span>;</span><br><span class="line">        String name2 = <span class="string">"abc"</span>;</span><br><span class="line">        System.out.println(name1.hashCode());</span><br><span class="line">        System.out.println(name2.hashCode());</span><br><span class="line">        System.out.println(<span class="string">"----------toString()------------"</span>);</span><br><span class="line">        System.out.println(s1.toString());</span><br><span class="line">        System.out.println(s2.toString());</span><br><span class="line">        System.out.println(s1);</span><br><span class="line">        System.out.println(s2);</span><br><span class="line">        System.out.println(<span class="string">"----------equals()------------"</span>);</span><br><span class="line">        System.out.println(s1.equals(s2));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">----------getClass()------------</span><br><span class="line">true</span><br><span class="line">myObject.Student</span><br><span class="line">Student</span><br><span class="line">myObject</span><br><span class="line">----------hashCode()------------</span><br><span class="line">1639705018</span><br><span class="line">1627674070</span><br><span class="line">96354</span><br><span class="line">96354</span><br><span class="line">----------toString()------------</span><br><span class="line">Student&#123;id=&apos;s1001&apos;, name=&apos;aa&apos;, age=20&#125;</span><br><span class="line">Student&#123;id=&apos;s1002&apos;, name=&apos;bb&apos;, age=20&#125;</span><br><span class="line">Student&#123;id=&apos;s1001&apos;, name=&apos;aa&apos;, age=20&#125;</span><br><span class="line">Student&#123;id=&apos;s1002&apos;, name=&apos;bb&apos;, age=20&#125;</span><br><span class="line">----------equals()------------</span><br><span class="line">false</span><br><span class="line">true</span><br></pre></td></tr></table></figure>

<h3 id="finalize-方法："><a href="#finalize-方法：" class="headerlink" title="finalize()方法："></a>finalize()方法：</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//重写finalize()</span></span><br><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">finalize</span><span class="params">()</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">  System.out.println(<span class="keyword">this</span>.name + <span class="string">"已回收"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestStudent</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">new</span> Student(<span class="string">"s1001"</span>, <span class="string">"aa"</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="keyword">new</span> Student(<span class="string">"s1002"</span>, <span class="string">"bb"</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="keyword">new</span> Student(<span class="string">"s1003"</span>, <span class="string">"cc"</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="keyword">new</span> Student(<span class="string">"s1004"</span>, <span class="string">"dd"</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="keyword">new</span> Student(<span class="string">"s1005"</span>, <span class="string">"ee"</span>, <span class="number">20</span>);</span><br><span class="line">        <span class="comment">//告诉垃圾回收器回收垃圾</span></span><br><span class="line">        System.gc();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>打印结果：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ee已回收</span><br><span class="line">dd已回收</span><br><span class="line">cc已回收</span><br><span class="line">bb已回收</span><br><span class="line">aa已回收</span><br></pre></td></tr></table></figure>

<ul>
<li>当对象被判定为垃圾对象时，由JVM自动调用此方法，用以标记垃圾对象， 进入回收队列。</li>
<li>垃圾对象:没有有效引用指向此对象时，为垃圾对象。</li>
<li>垃圾回收: 由GC销毁垃圾对象，释放数据存储空间。</li>
<li>自动回收机制:JVM的内存耗尽，一次性回收所有垃圾对象。</li>
<li>手动回收机制:使用System.gc(); 通知JVM执行垃圾回收。</li>
</ul>

          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://replica.me/2020/07/28/接口多态和编程原则/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="ReplicaSensei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/img/head01.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Valley of End">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                <a class="post-title-link" href="/2020/07/28/接口多态和编程原则/" itemprop="url">接口多态和编程原则</a></h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2020-07-28T19:58:14+08:00">
                2020-07-28
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h1><h2 id="接口的多态："><a href="#接口的多态：" class="headerlink" title="接口的多态："></a>接口的多态：</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestPolymorpfic</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Dog myDog = <span class="keyword">new</span> Dog();	<span class="comment">//将狗当成狗看</span></span><br><span class="line">    Animal a = my Dog;	<span class="comment">//将狗当成动物看</span></span><br><span class="line">    Runnable r = myDog;	<span class="comment">//将狗当成会跑的东西看</span></span><br><span class="line">    Swimmable s = myDog;	<span class="comment">//将狗当成会游泳的东西看</span></span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Runnable</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Swimmable</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">abstract</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Animal</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">eat</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">sleep</span><span class="params">()</span></span>&#123;&#125;;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">Animal</span> <span class="keyword">implements</span> <span class="title">Runnable</span>, <span class="title">Swimmable</span></span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;&#125;	<span class="comment">//接口方法</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">swim</span><span class="params">()</span></span>&#123;&#125;	<span class="comment">//接口方法</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">shout</span><span class="params">()</span></span>&#123;&#125;	<span class="comment">//独有方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="不同引用所能看到的对象范围不同，-只能调用自身类型中所声明的部分。"><a href="#不同引用所能看到的对象范围不同，-只能调用自身类型中所声明的部分。" class="headerlink" title="不同引用所能看到的对象范围不同， 只能调用自身类型中所声明的部分。"></a>不同引用所能看到的对象范围不同， 只能调用自身类型中所声明的部分。</h4><h2 id="接口总结"><a href="#接口总结" class="headerlink" title="接口总结"></a>接口总结</h2><h3 id="什么是接口："><a href="#什么是接口：" class="headerlink" title="什么是接口："></a>什么是接口：</h3><ul>
<li>微观：接口是一种能力和约定。</li>
<li>宏观：接口是一种标准。</li>
</ul>
<h3 id="接口与类的异同："><a href="#接口与类的异同：" class="headerlink" title="接口与类的异同："></a>接口与类的异同：</h3><ul>
<li>没有构造方法，仅可定义公开静态常量与公开抽象方法。</li>
</ul>
<h3 id="接口的应用"><a href="#接口的应用" class="headerlink" title="接口的应用"></a>接口的应用</h3><ul>
<li>Java为单继承，当父类的方法种类无法满足子类需求时，可实现接口扩充子类能力。</li>
</ul>
<h3 id="接口的规范"><a href="#接口的规范" class="headerlink" title="接口的规范"></a>接口的规范</h3><ul>
<li>任何类在实现接口时，必须实现接口中所有的抽象方法，否则此类为抽象类。</li>
<li>实现接口中的抽象方法时，访问修饰符必须是public。</li>
</ul>
<h3 id="什么是常量接口"><a href="#什么是常量接口" class="headerlink" title="什么是常量接口"></a>什么是常量接口</h3><ul>
<li>将多个常用于表示状态或固定值的变量，以静态常量的形式定义在接口中统一管理。</li>
</ul>
<h3 id="什么是接口回调"><a href="#什么是接口回调" class="headerlink" title="什么是接口回调"></a>什么是接口回调</h3><ul>
<li>先有接口的使用者，后有接口的实现者。</li>
</ul>
<h1 id="编程七大原则"><a href="#编程七大原则" class="headerlink" title="编程七大原则"></a>编程七大原则</h1><h2 id="开闭原则："><a href="#开闭原则：" class="headerlink" title="开闭原则："></a>开闭原则：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">程序的设计应该是不约束扩展，即扩展开放，但又不能修改已有功能，即修改关闭。因为在软件生命周期内，经常会出在原有功能基础上扩展新功能。这时，不能因为软件已经上线，不扩展新功能，但也不能直接修改旧的功能。正确的做法是，在原有功能上，扩展一个新的功能，新的需求依赖新的功能去实现。这样就既保证了老功能不受影响，有扩展了新功能。开闭原则一条非常重要的原则，可以说其它原则的基石。</span><br></pre></td></tr></table></figure>

<h2 id="单一原则"><a href="#单一原则" class="headerlink" title="单一原则"></a>单一原则</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">就一个类而言，应该仅有一个引起它变化的原因。具体说，在做编程的时候，很自然的回个一个类加上各种各样的功能。这样意味着，无论任何需求要来，都需要更改这个类，这样其实是很糟糕的，维护麻烦，复用不可能，也缺乏灵活性。如果一个类承担的职责过多，就等于把这些职责耦合起来，一个职责变化可能会削弱或者抑制这个类完成其他职责的能力。这种耦合会导致设计很脆弱，当变化发生时，设计会遭到很多意想不到的破坏。</span><br></pre></td></tr></table></figure>

<h2 id="代替原则（里氏代换原则）："><a href="#代替原则（里氏代换原则）：" class="headerlink" title="代替原则（里氏代换原则）："></a>代替原则（里氏代换原则）：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">派生类(子类)对象能够替换其基类(父类)对象被调用。这条原则主要是说，在程序中，任何调用基类对象实现的功能，都可以调用派生类对象来替换，当然，反过来是不行的。其实这里主要说的是继承问题，既然派生类继承基类，那它的对象也应该相应继承基类对象的实现，当然也就因该能替换基类对象。如果无法替换，就说明这个派生类继承有问题，需要修改设计。</span><br></pre></td></tr></table></figure>

<h2 id="依赖倒转原则："><a href="#依赖倒转原则：" class="headerlink" title="依赖倒转原则："></a>依赖倒转原则：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">这条原则说的是程序设计应该依赖抽象接口，而不应该依赖具体实现。经常听到的接口编程思想，其实说的主要就是这个原则。道理也很简单，接口是稳定的，实现是不稳定的。这也要求，一旦接口确定，就不应该再进行修改了。而根据接口的实现，是可以根据具体问题和情况，采用不同的手段去实现。</span><br></pre></td></tr></table></figure>

<h2 id="接口隔离原则："><a href="#接口隔离原则：" class="headerlink" title="接口隔离原则："></a>接口隔离原则：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">接口隔离是说，使用多个隔离接口，比使用单个接口要好，还是一个降低类之间耦合度的意思。经常提到的降低耦合，降低依赖，主要也是通过这个原则来达到的。另外，这样设计接口也可以给使用者带来方便，因为，越小的接口，就越好实现，复用性也越高。</span><br></pre></td></tr></table></figure>

<h2 id="最少原则（迪米特法则）"><a href="#最少原则（迪米特法则）" class="headerlink" title="最少原则（迪米特法则）:"></a>最少原则（迪米特法则）:</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一个实体应当尽可能少的与其他实体之间发生相互作用。这样做的目的在于减少依赖，独立功能，以便更好的复用。</span><br></pre></td></tr></table></figure>

<h2 id="合成-聚合复用原则："><a href="#合成-聚合复用原则：" class="headerlink" title="合成/聚合复用原则："></a>合成/聚合复用原则：</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在一个新的对象里面使用一些已有的对象，使之成为新对象的一部分，新的对象通过这些对象的委派达到复用已有功能的目的。设计原则是：尽量使用合成/聚合，尽量不要使用继承。</span><br></pre></td></tr></table></figure>


          
        
      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right"></i></a>
  </nav>



          </div>
          


          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      

      <section class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/img/head01.png" alt="ReplicaSensei">
            
              <p class="site-author-name" itemprop="name">ReplicaSensei</p>
              <p class="site-description motion-element" itemprop="description">Java是世界上最好的语言！(请忽略php)</p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/archives">
              
                  <span class="site-state-item-count">16</span>
                  <span class="site-state-item-name">posts</span>
                </a>
              </div>
            

            

            
              
              
              <div class="site-state-item site-state-tags">
                
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">tags</span>
                
              </div>
            

          </nav>

          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/ReplicaSensei/" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:zhangshaoru1998@outlook.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-globe"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">ReplicaSensei</span>

  
</div>


  <div class="powered-by">Powered by <a class="theme-link" target="_blank" href="https://hexo.io">Hexo</a></div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme &mdash; <a class="theme-link" target="_blank" href="https://github.com/iissnan/hexo-theme-next">NexT.Mist</a> v5.1.4</div>




        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  












  
  
    <script type="text/javascript" src="/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.4"></script>



  
  

  

  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  





  

  

  

  
  

  

  

  

</body>
</html>
